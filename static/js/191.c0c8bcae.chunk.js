"use strict";(self.webpackChunkTheresmore=self.webpackChunkTheresmore||[]).push([[191],{8191:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var s=r(5671),a=r(3144),o=r(9340),n=r(2882),i=r(7313),l=r(2126),p=r(927),d=r(8561),c=r.n(d),h=r(8966),m=r(8982),u=r(8519),y=r(6417),x=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).handleQty1=function(t){e.props.MainStore.ArmyStore.setArmyStepQty(1),t.currentTarget.blur()},e.handleQty10=function(t){e.props.MainStore.ArmyStore.setArmyStepQty(10),t.currentTarget.blur()},e.handleQty50=function(t){e.props.MainStore.ArmyStore.setArmyStepQty(50),t.currentTarget.blur()},e}return(0,a.Z)(r,[{key:"render",value:function(){var e=this.props.MainStore.ArmyStore.armyStepQty,t="btn relative w-full",r=t+" rounded-l-full rounded-r-none"+(1===e?" btn-blue":" btn-dark"),s=t+" rounded-l-none rounded-r-none -ml-px"+(10===e?" btn-blue":" btn-dark"),a=t+" rounded-l-none rounded-r-full -ml-px"+(50===e?" btn-blue":" btn-dark");return(0,y.jsx)("div",{className:"flex flex-col",children:(0,y.jsxs)("span",{className:"relative inline-flex shadow-sm rounded-full",children:[(0,y.jsx)("button",{type:"button",className:r,onClick:this.handleQty1,children:"+1"}),(0,y.jsx)("button",{type:"button",className:s,onClick:this.handleQty10,children:"+10"}),(0,y.jsx)("button",{type:"button",className:a,onClick:this.handleQty50,children:"+50"})]})})}}]),r}(i.Component),f=(0,l.f3)("MainStore")((0,l.Pi)(x)),b=r(4862),g=r(7914),k=r(5339),v=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(e){var a;return(0,s.Z)(this,r),(a=t.call(this,e)).handleAdd=function(){a.props.sD?a.props.MainStore.ArmyStore.addArmyQty(a.props.id):!a.state.progress&&a.props.buildable&&(a.setState({progress:!0}),setTimeout((function(){a.props.MainStore.ArmyStore.addArmyQty(a.props.id),a.setState({progress:!1})}),1e3))},a.handleDismiss=function(){a.props.MainStore.ArmyStore.dismissArmy(a.props.id)},a.state={progress:!1},a}return(0,a.Z)(r,[{key:"render",value:function(){var e="undefined"!==typeof this.props.cap&&this.props.qty>=this.props.cap,t=this.props.MainStore.ReqGenStore.reqTooltipData("army",this.props.req,this.props.qty),r=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen),s="btn btn-dark relative rounded-l-full w-full",a="btn btn-dark relative rounded-r-full rounded-l-none -ml-px w-min",o="";switch(this.props.type){case"recon":s+=" !border-blue-500 dark:!border-blue-700"+(o+=" text-blue-700 dark:text-blue-300"),a+=" !border-blue-500 dark:!border-blue-700"+o;break;case"spy":s+=" !border-violet-500 dark:!border-violet-700"+(o+=" text-violet-900 dark:text-violet-300"),a+=" !border-violet-500 dark:!border-violet-700"+o}return this.props.buildable?this.state.progress&&(s+=" btn-progress btn-progress-1"):s+=e?" btn-off btn-cap":" btn-off",s+=this.props.qty>0?" rounded-r-none":" rounded-r-full",this.props.qty-this.props.away>=1?a+="":a+=" btn-off",(0,y.jsx)("div",{className:"flex flex-col",children:(0,y.jsxs)("span",{className:"relative inline-flex shadow-sm rounded-full",children:[(0,y.jsx)(g.a,{content:(0,y.jsx)(k.Z,{id:this.props.id,title:(0,m.K)("uni_"+this.props.id),titleClasses:o,description:(0,m.K)("uni_"+this.props.id+"_description")+(0!==this.props.category?" ("+(0,m.K)("uni_cat_"+this.props.category)+")":""),owned:!1,reqTooltipData:t,genTooltipData:r,attack:this.props.attack,attackMod:this.props.attackMod,defense:this.props.defense,defenseMod:this.props.defenseMod,prefix:"uni"}),className:"!max-w-[260px]",touch:["hold",500],placement:b.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,y.jsxs)("button",{type:"button",className:s,onClick:this.handleAdd,children:[(0,m.K)("uni_"+this.props.id),(0,y.jsx)("span",{className:"absolute right-0 inline-block py-px px-2 text-gray-600 dark:text-mydark-50 z-[1]",children:1===this.props.category?(0,y.jsx)(c(),{path:h.YFH,className:"icon !w-3.5 opacity-40"}):2===this.props.category?(0,y.jsx)(c(),{path:h.Hne,className:"icon !w-3.5 opacity-40"}):3===this.props.category?(0,y.jsx)(c(),{path:h.hhU,className:"icon !w-3.5 opacity-40"}):4===this.props.category?(0,y.jsx)(c(),{path:h.XWK,className:"icon !w-3.5 opacity-40"}):"recon"===this.props.type?(0,y.jsx)(c(),{path:h.r8w,className:"icon !w-3.5 opacity-40"}):"spy"===this.props.type?(0,y.jsx)(c(),{path:h.XT1,className:"icon !w-3.5 opacity-40"}):null}),this.props.qty>0&&!this.state.progress?(0,y.jsx)("span",{className:"absolute -top-2 -right-3 inline-block py-px px-2 rounded-full font-bold text-xs bg-gray-300 text-gray-600 dark:bg-mydark-200 dark:text-mydark-50 z-[1]",children:this.props.qty}):null]})}),this.props.qty>0?(0,y.jsx)(g.a,{content:(0,m.K)("dismiss"),touch:["hold",500],placement:b.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,y.jsx)("button",{type:"button",className:a,onClick:this.handleDismiss,children:(0,y.jsx)(c(),{path:h.$Qg,className:"icon"})})}):null]})})}}]),r}(i.Component),j=(0,l.f3)("MainStore")((0,l.Pi)(v)),S=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){var e=this,t=this.props.MainStore,r=t.run,s=t.sD,a=this.props.MainStore.ArmyStore,o=a.visibleArmy,n=a.buildableArmy;return(0,y.jsx)(y.Fragment,{children:o.length>0?(0,y.jsx)("div",{className:"tab-container sub-container",children:(0,y.jsx)("div",{className:"flex flex-wrap min-w-full mt-3 p-3 shadow rounded-lg ring-1 ring-gray-300 dark:ring-mydark-200 bg-gray-100 dark:bg-mydark-600",children:(0,y.jsxs)("div",{className:"grid gap-3 grid-cols-fill-180 min-w-full px-12 xl:px-0",children:[(0,y.jsx)(f,{}),o.map((function(t){var a=r.army.findIndex((function(e){return e.id===t.id})),o=-1!==a?r.army[a].value:0,i=-1!==a?r.army[a].away:0,l=-1!==(a=n.findIndex((function(e){return e.id===t.id}))),p=e.props.MainStore.ArmyStore.calcArmyMods(t.id);return(0,y.jsx)(j,{id:t.id,qty:o,away:i,buildable:l,req:t.req,gen:t.gen,cap:t.cap,type:t.type,category:t.category,attack:t.attack,attackMod:p[0],defense:t.defense,defenseMod:p[1],sD:s},"army_create_"+t.id)}))]})})}):null})}}]),r}(i.Component),N=(0,l.f3)("MainStore")((0,l.Pi)(S)),w=r(1231),M=r(4671),A=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){var e=this.props.MainStore.ArmyStore.calcArmyMods("settlement_defenses");return(0,y.jsx)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:(0,y.jsxs)("div",{className:"flex-1 text-center relative px-12 2xl:px-0",children:[(0,y.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,m.K)("uni_settlement_defenses")}),(0,y.jsx)("p",{className:"text-sm 3xl:py-2",children:(0,m.K)("uni_settlement_defenses_description")}),(0,y.jsxs)("div",{className:"px-1 3xl:px-3 pt-2 text-sm text-center whitespace-nowrap",children:[(0,y.jsxs)("span",{className:"mx-3",children:[(0,y.jsxs)("span",{className:"text-red-500",children:[(0,y.jsx)(c(),{path:h.Hne,className:"icon inline -mt-1 lg:-mt-0.5 xl:-mt-1 3xl:-mt-px mr-1 !w-4"}),M.b[0].attack]}),e[0]>0?(0,y.jsxs)("span",{className:"text-green-600 dark:text-green-500",children:[" +",e[0]]}):null]}),(0,y.jsxs)("span",{className:"mx-3",children:[(0,y.jsxs)("span",{className:"text-blue-500",children:[(0,y.jsx)(c(),{path:h.pCE,className:"icon inline -mt-1 lg:-mt-0.5 xl:-mt-1 3xl:-mt-px mr-1 !w-4"}),M.b[0].defense]}),e[1]>0?(0,y.jsxs)("span",{className:"text-green-600 dark:text-green-500",children:[" +",e[1]]}):null]})]})]})})}}]),r}(i.Component),_=(0,l.f3)("MainStore")((0,l.Pi)(A)),C=r(1875),Z=r(2453),K=r(1048),P=r(6934),T=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(e){var a;return(0,s.Z)(this,r),(a=t.call(this,e)).toggleModal=function(){a.setState({open:!a.state.open})},a.selectEnemy=function(e){"spy"===a.props.type?a.props.MainStore.updateSpy(e):a.props.MainStore.updateEnemy(e),a.toggleModal()},a.state={open:!1},a}return(0,a.Z)(r,[{key:"enemyRow",value:function(e,t){var r=this,s=t%2===0?"bg-gray-200 dark:bg-mydark-300":"",a=[];if("undefined"!==typeof e.level&&e.level>0)for(var o=0;o<e.level;o++){var n="icon inline mr-1 !w-3.5 -mt-1";n+=o>3?" text-red-500":o>1?" text-orange-500":" text-gray-700 dark:text-mydark-50",a.push((0,y.jsx)(c(),{path:h.h27,className:n},"enemy-level-"+e.value+o))}return(0,y.jsx)("tr",{onClick:function(){return r.selectEnemy(e.value)},className:s+" hover:bg-gray-300 dark:hover:bg-mydark-700 cursor-pointer "+("spy"===this.props.type?"hover:text-violet-500":"hover:text-red-600"),children:(0,y.jsxs)("td",{className:"px-4 lg:px-6 py-4",children:[(0,y.jsx)("h5",{className:"text-xl font-bold",children:1===e.flag?(0,m.K)("dip_"+e.value):(0,m.K)("ene_"+e.value)}),(0,y.jsx)("div",{children:a}),""!==e.log?(0,y.jsxs)("div",{className:"text-violet-600 dark:text-violet-500",children:[(0,y.jsx)(c(),{path:h.XT1,className:"icon inline mr-1 !w-3.5 -mt-1"}),e.log]}):null,e.label]})},"enemy-"+e.value)}},{key:"render",value:function(){var e=this,t=this.props.MainStore.ArmyStore,r=t.enemiesOptions,s=t.spyOption,a=t.enemyOption,o=t.progressSpy,n=t.progressAttack,l=t.progressOracle,p=r.length<=0;("spy"===this.props.type&&o||"attack"===this.props.type&&(n||l))&&(p=!0);var d=r.length>0?"spy"===this.props.type?(0,m.K)("select_spy"):(0,m.K)("select_enemy"):"spy"===this.props.type?(0,m.K)("no_spy_enemy"):(0,m.K)("no_attackable_enemy"),c="";return"spy"===this.props.type&&""!==s.label?(d=s.label,c=" border-violet-500 dark:border-violet-700"):"attack"===this.props.type&&""!==a.label&&(d=a.label,c=" border-red-500 dark:border-red-700"),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{type:"button",className:"btn btn-dark w-full mb-4"+c,onClick:this.toggleModal,disabled:p,children:d}),(0,y.jsx)(C.u.Root,{show:this.state.open,as:i.Fragment,children:(0,y.jsxs)(Z.V,{as:"div",className:"relative z-50",onClose:this.toggleModal,children:[(0,y.jsx)(P.Z,{}),(0,y.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,y.jsx)("div",{className:"flex items-center justify-center min-h-full p-4 text-center lg:p-0",children:(0,y.jsx)(C.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,y.jsxs)(Z.V.Panel,{className:"modal-container lg:my-8 lg:max-w-xl lg:pt-6",children:[(0,y.jsx)(K.Z,{onClick:this.toggleModal}),(0,y.jsx)("div",{children:(0,y.jsxs)("div",{className:"mt-0",children:[(0,y.jsx)(Z.V.Title,{as:"h3",className:"modal-title",children:(0,m.K)("enemies").toLowerCase()}),(0,y.jsx)("div",{className:"mt-5",children:(0,y.jsx)("table",{className:"min-w-full",children:(0,y.jsx)("tbody",{className:"bg-gray-100 dark:bg-mydark-600 text-sm",children:r.map((function(t,r){return e.enemyRow(t,r)}))})})})]})})]})})})})]})})]})}}]),r}(i.Component),O=(0,l.f3)("MainStore")((0,l.Pi)(T)),q=r(8806),I=r(8033),R=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(e){var a;return(0,s.Z)(this,r),(a=t.call(this,e)).fps=250,a.step=100/(a.props.MainStore.ArmyStore.waitTime/a.fps),a.stepOracle=100/(a.props.MainStore.ArmyStore.waitTimeOracle/a.fps),a.workerInstance=void 0,a.handleExplore=function(){a.props.MainStore.ArmyStore.setProgressScout(a.step),a.props.MainStore.ArmyStore.startExplore(),a.workerInstance.postMessage(a.fps)},a.handleSpy=function(){a.props.MainStore.ArmyStore.setProgressSpy(a.step),a.props.MainStore.ArmyStore.startSpy(),a.workerInstance.postMessage(a.fps)},a.handleAttack=function(){a.props.MainStore.ArmyStore.setProgressAttack(a.step),a.props.MainStore.ArmyStore.startAttack(),a.workerInstance.postMessage(a.fps)},a.handleOracle=function(){a.props.MainStore.ArmyStore.setProgressOracle(a.stepOracle),a.props.MainStore.ArmyStore.startOracle(),a.workerInstance.postMessage(a.fps)},a.resetExplore=function(){a.props.MainStore.ArmyStore.resetArmy("recon")},a.resetSpy=function(){a.props.MainStore.ArmyStore.resetArmy("spy")},a.resetAttack=function(){a.props.MainStore.ArmyStore.resetArmy("army")},a.allExplore=function(){a.props.MainStore.ArmyStore.moveAll("recon")},a.allSpy=function(){a.props.MainStore.ArmyStore.moveAll("spy")},a.allAttack=function(){a.props.MainStore.ArmyStore.moveAll("army")},a._progressInterval=function(){"scout"===a.props.type?a.props.MainStore.ArmyStore.progressScout>=100?(a.workerInstance.postMessage("stop"),setTimeout((function(){a.props.MainStore.ArmyStore.setProgressScout(0)}),a.fps)):a.props.MainStore.ArmyStore.setProgressScout(a.props.MainStore.ArmyStore.progressScout+a.step):"spy"===a.props.type?a.props.MainStore.ArmyStore.progressSpy>=100?(a.workerInstance.postMessage("stop"),setTimeout((function(){a.props.MainStore.ArmyStore.setProgressSpy(0)}),a.fps)):a.props.MainStore.ArmyStore.setProgressSpy(a.props.MainStore.ArmyStore.progressSpy+a.step):"attack"===a.props.type&&(a.props.MainStore.ArmyStore.progressOracle>0?a.props.MainStore.ArmyStore.progressOracle>=100?(a.workerInstance.postMessage("stop"),setTimeout((function(){a.props.MainStore.ArmyStore.setProgressOracle(0)}),a.fps)):a.props.MainStore.ArmyStore.setProgressOracle(a.props.MainStore.ArmyStore.progressOracle+a.stepOracle):a.props.MainStore.ArmyStore.progressAttack>=100?(a.workerInstance.postMessage("stop"),setTimeout((function(){a.props.MainStore.ArmyStore.setProgressAttack(0)}),a.fps)):a.props.MainStore.ArmyStore.setProgressAttack(a.props.MainStore.ArmyStore.progressAttack+a.step))},a.workerInstance=new Worker(q.E),a.workerInstance.onmessage=function(){a._progressInterval()},a}return(0,a.Z)(r,[{key:"componentWillUnmount",value:function(){this.props.check&&this.workerInstance.terminate()}},{key:"render",value:function(){var e=this,t=this.props.MainStore.ArmyStore,r=t.progressScout,s=t.progressSpy,a=t.progressAttack,o=t.progressOracle,n=t.exploreInProgress,i=t.spyInProgress,l=t.attackInProgress,p=t.oracleInProgress,d=t.oracle,u=-1,x="scout"===this.props.type?n:"spy"===this.props.type?i:l||p;return(0,y.jsx)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:(0,y.jsxs)("div",{className:"flex-1 text-center relative",children:[(0,y.jsx)("h5",{className:"text-xl lg:text-base font-bold whitespace-nowrap inline "+("scout"===this.props.type?"text-blue-600 dark:text-blue-500":"spy"===this.props.type?"text-violet-600 dark:text-violet-500":"text-red-600"),children:"scout"===this.props.type?(0,m.K)("explore"):"spy"===this.props.type?(0,m.K)("tec_espionage"):(0,m.K)("attack")}),Object.keys(this.props.costs).length>0?(0,y.jsxs)(y.Fragment,{children:[x?null:(0,y.jsx)("div",{className:"absolute top-0 right-7",children:(0,y.jsx)("button",{type:"button",className:"text-gray-400 dark:text-mydark-100 "+("scout"===this.props.type?"hover:text-blue-600 dark:hover:text-blue-500 focus:text-blue-600 dark:focus:text-blue-500":"spy"===this.props.type?"hover:text-violet-600 dark:hover:text-violet-500 focus:text-violet-600 dark:focus:text-violet-500":"hover:text-red-600 dark:hover:text-red-600 focus:text-red-600 dark:focus:text-red-600"),onClick:"scout"===this.props.type?this.resetExplore:"spy"===this.props.type?this.resetSpy:this.resetAttack,children:(0,y.jsx)(c(),{path:h.M_e,className:"icon"})})}),(0,y.jsx)("div",{className:"flex",children:(0,y.jsx)("table",{className:"min-w-full my-4",children:(0,y.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:I.v.map((function(t){return"undefined"!==typeof e.props.costs[t.id]?(u++,(0,y.jsxs)("tr",{className:u%2===0?"bg-gray-200 dark:bg-mydark-300":"",children:[(0,y.jsx)("td",{className:"text-left px-4 py-1 whitespace-nowrap",children:(0,m.K)("res_"+t.id)}),(0,y.jsx)("td",{className:"text-right px-4 py-1",children:e.props.costs[t.id].toLocaleString()})]},e.props.type+"_cost_"+t.id)):null}))})})})]}):(0,y.jsx)("div",{className:"flex justify-center my-4 text-sm",children:(0,y.jsx)("div",{className:"w-auto",children:(0,y.jsx)(w.Z,{text:(0,m.K)(this.props.type+"_empty"),type:"info",small:!0})})}),x?null:(0,y.jsx)("div",{className:"absolute top-0 right-0",children:(0,y.jsx)("button",{type:"button",className:"text-gray-400 dark:text-mydark-100 "+("scout"===this.props.type?"hover:text-blue-600 dark:hover:text-blue-500 focus:text-blue-600 dark:focus:text-blue-500":"spy"===this.props.type?"hover:text-violet-600 dark:hover:text-violet-500 focus:text-violet-600 dark:focus:text-violet-500":"hover:text-red-600 dark:hover:text-red-600 focus:text-red-600 dark:focus:text-red-600"),onClick:"scout"===this.props.type?this.allExplore:"spy"===this.props.type?this.allSpy:this.allAttack,children:(0,y.jsx)(c(),{path:h.KkW,className:"icon"})})}),"scout"===this.props.type?(0,y.jsx)("div",{className:"flex flex-wrap",children:r>0?(0,y.jsx)("div",{className:"relative w-full pt-1 pb-px lg:pt-0",children:(0,y.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,y.jsx)("div",{style:{width:r+"%"},className:"flex flex-col bg-blue-500"})})}):(0,y.jsxs)("button",{type:"button",className:"btn mt-[-1px] w-full btn-blue "+(this.props.check?"":"btn-off border-blue-500 dark:border-blue-700"),onClick:this.handleExplore,disabled:!this.props.check,children:[(0,y.jsx)(c(),{path:h.r8w,className:"icon mr-1 mt-[1px]"}),(0,m.K)("send_to_explore")]})}):"spy"===this.props.type?(0,y.jsxs)("div",{className:"flex flex-wrap",children:[(0,y.jsx)(O,{type:"spy"}),s>0?(0,y.jsx)("div",{className:"relative w-full pt-1 lg:pt-0",children:(0,y.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,y.jsx)("div",{style:{width:s+"%"},className:"flex flex-col bg-violet-500"})})}):(0,y.jsxs)("button",{type:"button",className:"btn mt-[-2px] w-full text-white bg-violet-500 hover:bg-violet-600 focus:bg-violet-700 dark:bg-violet-600 dark:hover:bg-violet-700 dark:focus:bg-violet-800 "+(this.props.check?"":"btn-off border-violet-500 dark:border-violet-700"),onClick:this.handleSpy,disabled:!this.props.check,children:[(0,y.jsx)(c(),{path:h.XT1,className:"icon mr-1 mt-[1px]"}),(0,m.K)("send_to_spy")]})]}):"attack"===this.props.type?(0,y.jsxs)("div",{className:"flex flex-wrap",children:[(0,y.jsx)(O,{type:"attack"}),d?o>0?(0,y.jsx)("div",{className:"relative w-full pt-1 lg:pt-0",children:(0,y.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-7 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,y.jsx)("div",{style:{width:o+"%"},className:"flex flex-col bg-indigo-500"})})}):(0,y.jsxs)("button",{type:"button",className:"btn mt-[-2px] w-full mb-4 text-white bg-indigo-500 hover:bg-indigo-600 focus:bg-indigo-700 dark:bg-indigo-600 dark:hover:bg-indigo-700 dark:focus:bg-indigo-800 "+(this.props.check?"":"btn-off border-indigo-500 dark:border-indigo-700"),onClick:this.handleOracle,disabled:!this.props.check,children:[(0,y.jsx)(c(),{path:h.mOX,className:"icon mr-1 mt-[1px]"}),(0,m.K)("oracle_button")]}):null,a>0?(0,y.jsx)("div",{className:"relative w-full pt-1 lg:pt-0",children:(0,y.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,y.jsx)("div",{style:{width:a+"%"},className:"flex flex-col bg-red-600 dark:bg-red-700"})})}):(0,y.jsxs)("button",{type:"button",className:"btn mt-[-2px] w-full btn-red "+(this.props.check?"":"btn-off border-red-500 dark:border-red-700"),onClick:this.handleAttack,disabled:!this.props.check,children:[(0,y.jsx)(c(),{path:h.Hne,className:"icon mr-1 mt-[1px]"}),(0,m.K)("send_to_attack")]})]}):null]})})}}]),r}(i.Component),D=(0,l.f3)("MainStore")((0,l.Pi)(R)),X=r(2171),E=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t,r,s){s>1?t+="increase"===r?s:-s:"shift"===e.props.MainStore.keyPress?t+="increase"===r?4:-4:"ctrl"===e.props.MainStore.keyPress&&(t+="increase"===r?9:-9),"defense"===e.props.type?e.props.MainStore.ArmyStore.updateDefense(e.props.id,t):e.props.MainStore.ArmyStore.updateAway(e.props.id,t)},e}return(0,a.Z)(r,[{key:"render",value:function(){var e=this;return(0,y.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:[(0,y.jsxs)("div",{className:"flex-1 text-center relative mb-2 "+(this.props.reqAttackTooltip?"lg:mb-0":"lg:mb-4"),children:[(0,y.jsx)(g.a,{content:(0,y.jsx)(k.Z,{id:this.props.id,title:(0,m.K)("uni_"+this.props.id),description:(0,m.K)("uni_"+this.props.id+"_description")+(0!==this.props.category?" ("+(0,m.K)("uni_cat_"+this.props.category)+")":""),reqTooltipData:this.props.reqAttackTooltip,prefix:"uni_spinner",titleClasses:" pt-3",containerClasses:" lg:hidden"}),className:"!max-w-[260px]",touch:["hold",500],placement:b.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,y.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,m.K)("uni_"+this.props.id)})}),(0,y.jsx)("div",{className:"absolute top-0 right-0",children:1===this.props.category?(0,y.jsx)(c(),{path:h.YFH,className:"icon !w-4 opacity-40"}):2===this.props.category?(0,y.jsx)(c(),{path:h.Hne,className:"icon !w-4 opacity-40"}):3===this.props.category?(0,y.jsx)(c(),{path:h.hhU,className:"icon !w-4 opacity-40"}):4===this.props.category?(0,y.jsx)(c(),{path:h.XWK,className:"icon !w-4 opacity-40"}):"recon"===this.props.uniType?(0,y.jsx)(c(),{path:h.r8w,className:"icon !w-4 opacity-40"}):"spy"===this.props.uniType?(0,y.jsx)(c(),{path:h.XT1,className:"icon !w-4 opacity-40"}):null}),this.props.reqAttackTooltip?(0,y.jsx)("table",{className:"min-w-full my-4 hidden lg:table",children:(0,y.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:this.props.reqAttackTooltip.map((function(t,r){return(0,y.jsxs)("tr",{className:r%2===0?"bg-gray-200 dark:bg-mydark-300":"",children:[(0,y.jsx)("td",{className:"text-left px-4 py-1 whitespace-nowrap",children:t.label}),(0,y.jsx)("td",{className:"text-right px-4 py-1",children:t.value})]},e.props.id+"_uni_"+r)}))})}):null]}),(0,y.jsx)(X.Z,{value:this.props.qty,max:this.props.cap,forceMax:this.props.forceMax,onChange:this.handleChange,disabled:this.props.disabled},"spinner_"+this.props.id)]})}}]),r}(i.Component),Q=(0,l.f3)("MainStore")((0,l.Pi)(E)),F=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){var e=this,t=this.props.MainStore.run,r=this.props.MainStore.ArmyStore,s=r.defenseCount,a=r.scoutCount,o=r.ownedScout,n=r.exploreInProgress,i=r.costsScout,l=r.checkScout,p=r.spyCount,d=r.ownedSpy,c=r.spyInProgress,h=r.costsSpy,u=r.checkSpy,x=r.armyCount,f=r.ownedArmy,b=r.attackInProgress,g=r.costsAttack,k=r.checkAttack,v=r.checkOracle,j=r.oracleInProgress,S="scout"===this.props.type?i:"spy"===this.props.type?h:g,N="scout"===this.props.type?l:"spy"===this.props.type?u:k&&v,M="defense"===this.props.type?a+p+x:"scout"===this.props.type?a:"spy"===this.props.type?p:x,A="defense"===this.props.type?o.concat(d).concat(f):"scout"===this.props.type?o:"spy"===this.props.type?d:f,C="scout"===this.props.type?n:"spy"===this.props.type?c:b||j;return(0,y.jsx)(y.Fragment,{children:M>0||"defense"===this.props.type?(0,y.jsx)("div",{className:"tab-container sub-container",children:(0,y.jsx)("div",{className:"flex flex-wrap min-w-full mt-3",children:(0,y.jsxs)("div",{className:"grid gap-3 grid-cols-fill-270 xl:grid-cols-fill-240 min-w-full",children:["defense"===this.props.type?(0,y.jsx)(_,{}):(0,y.jsx)(D,{costs:S,check:N,type:this.props.type}),M>0?A.map((function(r){if("defense"===e.props.type){var a=t.army.findIndex((function(e){return e.id===r.id})),o=-1!==a&&"undefined"!==typeof t.army[a].value?t.army[a].value:0,i=-1!==a&&"undefined"!==typeof t.army[a].away?o-t.army[a].away:0;return C="recon"===r.type?n:"spy"===r.type?c:b||j,(0,y.jsx)(Q,{id:r.id,qty:i,cap:o,forceMax:!1,disabled:C,category:r.category,type:e.props.type,uniType:r.type},"army_defense_"+r.id)}var l=t.army.findIndex((function(e){return e.id===r.id})),p=-1!==l&&"undefined"!==typeof t.army[l].value?t.army[l].value:0,d=-1!==l&&"undefined"!==typeof t.army[l].away?t.army[l].away:0,h=e.props.MainStore.ReqGenStore.reqTooltipData("armyAttack",r.reqAttack,!1,d);return(0,y.jsx)(Q,{id:r.id,qty:d,cap:p,forceMax:0===s,reqAttackTooltip:h,disabled:C,category:r.category,type:e.props.type,uniType:r.type},"army_combat_"+r.id)})):null]})})}):(0,y.jsx)("div",{className:"flex justify-center my-6 text-lg",children:(0,y.jsx)("div",{className:"w-auto",children:(0,y.jsx)(w.Z,{text:(0,m.K)(this.props.type+"_empty"),type:"info"})})})})}}]),r}(i.Component),H=(0,l.f3)("MainStore")((0,l.Pi)(F)),U=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){var e=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen);return(0,y.jsx)("div",{className:"flex flex-col",children:(0,y.jsx)(g.a,{content:(0,y.jsx)(k.Z,{id:this.props.id,title:"kingdom"===this.props.type?(0,m.K)("dip_"+this.props.id):(0,m.K)("ene_"+this.props.id),description:"kingdom"===this.props.type?(0,m.K)("dip_"+this.props.id+"_description"):(0,m.K)("ene_"+this.props.id+"_description"),genTooltipData:e,prefix:"ene"}),className:"!max-w-[260px]",touch:["hold",500],placement:b.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,y.jsx)("button",{type:"button",className:"btn btn-dark btn-off btn-cap",children:"kingdom"===this.props.type?this.props.owned?(0,m.K)("dip_owned"):(0,m.K)("dip_"+this.props.id):(0,m.K)("ene_"+this.props.id)})})})}}]),r}(i.Component),G=(0,l.f3)("MainStore")((0,l.Pi)(U)),W=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){var e=this.props.MainStore.ArmyStore.ownedEnemies,t=this.props.MainStore.DiplomacyStore.ownedDiplomacy;return(0,y.jsx)(y.Fragment,{children:e.length>0||t.length>0?(0,y.jsx)("div",{className:"tab-container sub-container",children:(0,y.jsx)("div",{className:"flex flex-wrap min-w-full mt-3 p-3 shadow rounded-lg ring-1 ring-gray-300 dark:ring-mydark-200 bg-gray-100 dark:bg-mydark-600",children:(0,y.jsxs)("div",{className:"grid gap-3 grid-cols-fill-180 min-w-full px-12 xl:px-0",children:[t.map((function(e){return(0,y.jsx)(G,{id:e.id,gen:e.gen,type:"kingdom"},"kingdom_owned_"+e.id)})),e.map((function(e){return(0,y.jsx)(G,{id:e.id,gen:e.gen},"enemy_owned_"+e.id)}))]})})}):(0,y.jsx)("div",{className:"flex justify-center my-6 text-lg",children:(0,y.jsx)("div",{className:"w-auto",children:(0,y.jsx)(w.Z,{text:(0,m.K)("enemies_empty"),type:"info"})})})})}}]),r}(i.Component),z=(0,l.f3)("MainStore")((0,l.Pi)(W)),Y=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).handleSelect=function(t){e.props.MainStore.ArmyStore.selectTab(t)},e}return(0,a.Z)(r,[{key:"render",value:function(){var e=this.props.MainStore.ArmyStore,t=e.selectedTab,r=e.visibleEspionage,s=e.cap,a=e.ownedCount,o=e.scoutCount,n=e.scoutAwayCount,i=e.spyCount,l=e.spyAwayCount,d=e.armyCount,x=e.armyAwayCount,f=e.defenseCount,b=(0,u.AK)("armies",r?"espionage":""),g="inline-flex justify-center rounded-full border shadow-sm px-3 py-2 text-sm whitespace-nowrap border-gray-400 dark:border-gray-500";g+=" xl:block xl:rounded-none xl:border-0 xl:shadow-none lg:px-2 xl:border-transparent xl:dark:border-transparent",g+=" xl:border-b-2 xl:m-[-1px] 4xl:px-6 3xl:text-base";var k="!border-ancestor text-ancestor",v="xl:border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-mydark-50 hover:border-gray-400 dark:hover:border-gray-500";return(0,y.jsxs)(p.O.Group,{selectedIndex:t,onChange:this.handleSelect,children:[(0,y.jsx)("div",{className:"mx-auto border-b border-gray-300 dark:border-mydark-200 flex justify-center mt-1 xl:mt-0",children:(0,y.jsxs)(p.O.List,{className:"grid grid-cols-2 gap-3 my-2 mb-3 lg:gap-1 lg:mt-0 lg:mb-1 xl:flex xl:mb-0 2xl:gap-3",children:[(0,y.jsxs)(p.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("army"),(0,y.jsx)(c(),{path:h.UeY,className:"icon inline 3xl:-mt-1 mx-1"}),a," / ",s]}),(0,y.jsxs)(p.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("explore"),(0,y.jsx)(c(),{path:h.r8w,className:"icon inline 3xl:-mt-1 mx-1"}),n," / ",o]}),r?(0,y.jsxs)(p.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("spy"),(0,y.jsx)(c(),{path:h.XT1,className:"icon inline 3xl:-mt-1 mx-1"}),l," / ",i]}):null,(0,y.jsxs)(p.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("attack"),(0,y.jsx)(c(),{path:h.Hne,className:"icon inline 3xl:-mt-1 mx-1"}),x," / ",d]}),(0,y.jsxs)(p.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("garrison"),(0,y.jsx)(c(),{path:h.pCE,className:"icon inline 3xl:-mt-1 mx-1"}),f," / ",a]}),(0,y.jsxs)(p.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,y.jsx)(c(),{path:h.YKm,className:"icon inline lg:-mt-1 mr-1"}),(0,m.K)("enemies")]})]})}),(0,y.jsxs)(p.O.Panels,{children:[(0,y.jsx)(p.O.Panel,{children:(0,y.jsx)(N,{})}),(0,y.jsx)(p.O.Panel,{children:(0,y.jsx)(H,{type:"scout"})}),r?(0,y.jsx)(p.O.Panel,{children:(0,y.jsx)(H,{type:"spy"})}):null,(0,y.jsx)(p.O.Panel,{children:(0,y.jsx)(H,{type:"attack"})}),(0,y.jsx)(p.O.Panel,{children:(0,y.jsx)(H,{type:"defense"})}),(0,y.jsx)(p.O.Panel,{children:(0,y.jsx)(z,{})})]})]},b)}}]),r}(i.Component),L=(0,l.f3)("MainStore")((0,l.Pi)(Y))},2171:function(e,t,r){r.d(t,{Z:function(){return h}});var s=r(5671),a=r(3144),o=r(9340),n=r(2882),i=r(7313),l=r(8561),p=r.n(l),d=r(8966),c=r(6417),h=function(e){(0,o.Z)(r,e);var t=(0,n.Z)(r);function r(e){var a;return(0,s.Z)(this,r),(a=t.call(this,e)).decrease=function(e){e.currentTarget.blur(),a._decrease(a.state.step)},a.decreaseX=function(e){e.currentTarget.blur(),a._decrease(a.state.stepX)},a.increase=function(e){e.currentTarget.blur(),a._increase(a.state.step)},a.increaseX=function(e){e.currentTarget.blur(),a._increase(a.state.stepX)},a.state={value:a.props.value,min:0,max:a.props.max,forceMax:a.props.forceMax,step:1,stepX:9,minReached:a.props.value<=0,maxReached:a.props.value>=a.props.max||a.props.forceMax,disabled:"undefined"!==typeof a.props.disabled&&a.props.disabled},a}return(0,a.Z)(r,[{key:"componentDidUpdate",value:function(e){this.props.max===e.max&&this.props.forceMax===e.forceMax&&this.props.value===e.value&&this.props.disabled===e.disabled||this.setState({value:this.props.value,max:this.props.max,forceMax:this.props.forceMax,minReached:this.props.value<=0,maxReached:this.props.value>=this.props.max||this.props.forceMax,disabled:"undefined"!==typeof this.props.disabled&&this.props.disabled})}},{key:"_decrease",value:function(e){var t=!1,r=this.state.value-1;r<=this.state.min&&(r=this.state.min,t=!0),this.setState({value:r,minReached:t,maxReached:r>=this.state.max||this.state.forceMax}),this.props.onChange(r,"decrease",e)}},{key:"_increase",value:function(e){var t=!1,r=this.state.value+1;this.state.forceMax?(r=this.state.value,t=!0):r>=this.state.max&&(r=this.state.max,t=!0),this.setState({value:r,maxReached:t,minReached:r<=this.state.min}),this.props.onChange(r,"increase",e)}},{key:"render",value:function(){var e="btn shadow-none px-2.5 w-min",t=e;e+=" rounded-none lg:rounded-xl lg:rounded-r-none",t+=" lg:hidden rounded-xl rounded-r-none",this.state.minReached||this.state.disabled?(e+=" btn-dark",t+=" btn-dark !border-r-transparent"):(e+=" btn-red",t+=" btn-red border-r-red-600 dark:border-r-red-700");var r="btn shadow-none px-2.5 w-min",s=r;return r+=" rounded-none lg:rounded-xl lg:rounded-l-none",s+=" lg:hidden rounded-xl rounded-l-none",this.state.maxReached||this.state.disabled?(r+=" btn-dark",s+=" btn-dark !border-l-transparent"):(r+=" btn-green",s+=" btn-green border-l-green-700"),(0,c.jsxs)("div",{className:"relative inline-flex min-w-full shadow-sm rounded-full",children:[(0,c.jsx)("button",{className:t,type:"button",onClick:this.decreaseX,disabled:this.state.minReached||this.state.disabled,children:(0,c.jsx)(p(),{path:d.UHA,className:"icon"})}),(0,c.jsxs)("button",{className:e,type:"button",onClick:this.decrease,disabled:this.state.minReached||this.state.disabled,children:[(0,c.jsx)(p(),{path:d.v5B,className:"icon lg:hidden"}),(0,c.jsx)(p(),{path:d.UHA,className:"icon hidden lg:block"})]}),(0,c.jsx)("input",{type:"text",className:"w-full min-w-[70px] text-center lg:text-sm text-gray-700 bg-gray-100 dark:text-mydark-50 dark:bg-mydark-400 border-y border-gray-400 dark:border-mydark-200",value:this.state.value+" / "+this.state.max,disabled:!0}),(0,c.jsxs)("button",{className:r,type:"button",onClick:this.increase,disabled:this.state.maxReached||this.state.disabled,children:[(0,c.jsx)(p(),{path:d.MUM,className:"icon lg:hidden"}),(0,c.jsx)(p(),{path:d.qX5,className:"icon hidden lg:block"})]}),(0,c.jsx)("button",{className:s,type:"button",onClick:this.increaseX,disabled:this.state.maxReached||this.state.disabled,children:(0,c.jsx)(p(),{path:d.qX5,className:"icon"})})]})}}]),r}(i.Component)}}]);