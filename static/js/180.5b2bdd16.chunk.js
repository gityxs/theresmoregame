"use strict";(self.webpackChunkTheresmore=self.webpackChunkTheresmore||[]).push([[180],{1180:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var a=t(9950),i=t(8232),r=t(4090),n=t.n(r),o=t(2631),d=t(443),l=t(9135),p=t(1377),h=t(346),c=t(2073),m=t(5970),u=t(9182),x=t(4414);class b extends a.Component{constructor(){super(...arguments),this.handleChange=(e,s,t)=>{let a="increase"===s?1:-1;t>1?(e+="increase"===s?t:-t,a+="increase"===s?t:-t):"shift"===this.props.MainStore.keyPress?(e+="increase"===s?4:-4,a+="increase"===s?4:-4):"ctrl"===this.props.MainStore.keyPress&&(e+="increase"===s?9:-9,a+="increase"===s?9:-9),this.props.MainStore.PopulationStore.updatePopulation(this.props.id,e,a)}}render(){let e=[];return 0===this.props.qty&&this.props.gen.forEach((s=>{const t=(0,d.v)("res_"+s.id),a=this.props.modTooltip.findIndex((e=>e.label===t)),i=(s.value<0?"-":"+")+(-1===a?"":this.props.modTooltip[a].value);e.push({label:t,value:i})})),(0,x.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:[(0,x.jsxs)("div",{className:"flex-1 text-center mb-2 lg:mb-0",children:[0===this.props.modTooltip.length&&0===e.length?(0,x.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,d.v)("pop_"+this.props.id)}):(0,x.jsx)(h.l,{content:(0,x.jsx)(c.A,{id:this.props.id,title:(0,d.v)("pop_"+this.props.id),modTooltipData:e.concat(this.props.modTooltip),prefix:"pop",titleClasses:" pt-3"}),touch:["hold",500],placement:p.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,x.jsx)("h5",{className:"font-bold whitespace-nowrap inline py-4 lg:p-0",children:(0,d.v)("pop_"+this.props.id)})}),(0,x.jsx)("div",{className:"my-4 hidden lg:block",children:(0,x.jsx)("div",{className:"rounded border border-gray-300 dark:border-gray-700 overflow-hidden",children:this.props.gen.map(((e,s)=>{const t=(0,d.v)("res_"+e.id),a=this.props.modTooltip.findIndex((e=>e.label===t)),i=s%2===0;return(0,x.jsxs)("div",{className:(0,m.xW)("flex items-center justify-between px-2 py-1 text-sm",i?"bg-gray-200 dark:bg-mydark-300/5":"bg-gray-200/5 dark:bg-mydark-300",""),children:[(0,x.jsx)("span",{className:(0,m.xW)(-1===a&&e.value<0?"text-red-600":"","whitespace-nowrap"),children:t}),(0,x.jsx)("span",{className:(0,m.xW)(e.value<0?"text-red-600":"","font-medium ml-2"),children:-1===a?e.value<0?"-":"+":this.props.modTooltip[a].value})]},this.props.id+"_pop_"+s)}))})})]}),(0,x.jsx)(u.A,{value:this.props.qty,max:this.props.cap,forceMax:this.props.forceMax,onChange:this.handleChange,small:!0},"spinner_"+this.props.id)]})}}const f=(0,i.WQ)("MainStore")((0,i.PA)(b));class g extends a.Component{constructor(){super(...arguments),this.handleReset=()=>{this.props.MainStore.PopulationStore.resetPopulation()}}render(){const{run:e}=this.props.MainStore,{population:s,qtyUnemployed:t}=this.props.MainStore.PopulationStore;let a=e.population.findIndex((e=>e.id===s[0].id));const i=-1!==a&&"undefined"!==typeof e.population[a].value?e.population[a].value:0;a=e.caps.findIndex((e=>e.id===s[0].id));const r=-1!==a?e.caps[a].value:0;return(0,x.jsx)(x.Fragment,{children:s.length>1?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex justify-center mx-auto pt-3 font-bold text-lg",children:[(0,d.v)("pop_"+s[0].id),(0,x.jsxs)("span",{className:"ml-2",children:[i," / ",r]}),i<r?(0,x.jsx)("button",{type:"button",className:"ml-2 mt-0.5 text-gray-400 dark:text-mydark-200 hover:text-red-600 dark:hover:text-red-600 focus:text-red-600 dark:focus:text-red-600",onClick:this.handleReset,children:(0,x.jsx)(n(),{path:o.lu1,className:"icon"})}):null]}),(0,x.jsx)("div",{className:"tab-container sub-container",children:(0,x.jsx)("div",{className:"flex flex-wrap min-w-full mt-3",children:(0,x.jsx)("div",{className:"grid gap-3 grid-cols-fill-270 xl:grid-cols-fill-200 min-w-full",children:s.map((s=>{if("unemployed"===s.id)return null;let a=e.population.findIndex((e=>e.id===s.id));const i=-1!==a&&"undefined"!==typeof e.population[a].value?e.population[a].value:0;a=e.caps.findIndex((e=>e.id===s.id));const r=-1!==a?e.caps[a].value:0;let n=[];return"unemployed"!==s.id&&(n=this.props.MainStore.ModifiersStore.modTooltipData(s.id)),(0,x.jsx)(f,{id:s.id,cap:r,forceMax:0===t,qty:i,gen:s.gen,modTooltip:n},"population_"+s.id)}))})})})]}):(0,x.jsx)("div",{className:"flex justify-center my-6 text-lg",children:(0,x.jsx)("div",{className:"w-auto",children:(0,x.jsx)(l.A,{text:(0,d.v)("population_empty"),type:"info"})})})})}}const v=(0,i.WQ)("MainStore")((0,i.PA)(g))},9182:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(9950),i=t(4090),r=t.n(i),n=t(2631),o=t(4414);class d extends a.Component{constructor(e){super(e),this.decrease=e=>{e.currentTarget.blur(),this._decrease(this.state.step)},this.decreaseX=e=>{e.currentTarget.blur(),this._decrease(this.state.stepX)},this.increase=e=>{e.currentTarget.blur(),this._increase(this.state.step)},this.increaseX=e=>{e.currentTarget.blur(),this._increase(this.state.stepX)},this.state={value:this.props.value,min:0,max:this.props.max,forceMax:this.props.forceMax,step:1,stepX:9,minReached:this.props.value<=0,maxReached:this.props.value>=this.props.max||this.props.forceMax,disabled:"undefined"!==typeof this.props.disabled&&this.props.disabled}}componentDidUpdate(e){this.props.max===e.max&&this.props.forceMax===e.forceMax&&this.props.value===e.value&&this.props.disabled===e.disabled||this.setState({value:this.props.value,max:this.props.max,forceMax:this.props.forceMax,minReached:this.props.value<=0,maxReached:this.props.value>=this.props.max||this.props.forceMax,disabled:"undefined"!==typeof this.props.disabled&&this.props.disabled})}_decrease(e){let s=!1,t=this.state.value-1;t<=this.state.min&&(t=this.state.min,s=!0),this.setState({value:t,minReached:s,maxReached:t>=this.state.max||this.state.forceMax}),this.props.onChange(t,"decrease",e)}_increase(e){let s=!1,t=this.state.value+1;this.state.forceMax?(t=this.state.value,s=!0):t>=this.state.max&&(t=this.state.max,s=!0),this.setState({value:t,maxReached:s,minReached:t<=this.state.min}),this.props.onChange(t,"increase",e)}render(){let e="btn shadow-none px-2.5 w-min",s=e;e+=" rounded-none lg:rounded-xl lg:rounded-r-none",s+=" lg:hidden rounded-xl rounded-r-none",this.state.minReached||this.state.disabled?(e+=" btn-dark",s+=" btn-dark !border-r-transparent"):(e+=" btn-red",s+=" btn-red border-r-red-600 dark:border-r-red-700");let t="btn shadow-none px-2.5 w-min",a=t;return t+=" rounded-none lg:rounded-xl lg:rounded-l-none",a+=" lg:hidden rounded-xl rounded-l-none",this.state.maxReached||this.state.disabled?(t+=" btn-dark",a+=" btn-dark !border-l-transparent"):(t+=" btn-green",a+=" btn-green border-l-green-700"),(0,o.jsxs)("div",{className:"relative inline-flex min-w-full shadow-sm rounded-full",children:[(0,o.jsx)("button",{className:s,type:"button",onClick:this.decreaseX,disabled:this.state.minReached||this.state.disabled,children:(0,o.jsx)(r(),{path:n.XzY,className:"icon"})}),(0,o.jsxs)("button",{className:e,type:"button",onClick:this.decrease,disabled:this.state.minReached||this.state.disabled,children:[(0,o.jsx)(r(),{path:n.wzK,className:"icon lg:hidden"}),(0,o.jsx)(r(),{path:n.XzY,className:"icon hidden lg:block"})]}),(0,o.jsx)("input",{type:"text",className:"w-full min-w-[70px] text-center lg:text-sm text-gray-700 bg-gray-100 dark:text-mydark-50 dark:bg-mydark-400 border-y border-gray-400 dark:border-mydark-200",value:this.state.value+" / "+this.state.max,disabled:!0}),(0,o.jsxs)("button",{className:t,type:"button",onClick:this.increase,disabled:this.state.maxReached||this.state.disabled,children:[(0,o.jsx)(r(),{path:n.GWk,className:"icon lg:hidden"}),(0,o.jsx)(r(),{path:n.biz,className:"icon hidden lg:block"})]}),(0,o.jsx)("button",{className:a,type:"button",onClick:this.increaseX,disabled:this.state.maxReached||this.state.disabled,children:(0,o.jsx)(r(),{path:n.biz,className:"icon"})})]})}}}}]);