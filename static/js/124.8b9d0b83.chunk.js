"use strict";(self.webpackChunkTheresmore=self.webpackChunkTheresmore||[]).push([[124],{2124:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var i=r(5671),s=r(3144),n=r(136),a=r(7277),o=r(7313),p=r(2126),l=r(4862),d=r(7914),c=r(8982),h=r(8561),m=r.n(h),x=r(8966),u=r(1231),g=r(5339),f=r(6417),b=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(e){var s;return(0,i.Z)(this,r),(s=t.call(this,e)).handleSend=function(){var e=s.props.MainStore.ReqGenStore.checkReq("delegation",s.props.id,{id:s.props.id,req:s.props.req});!s.state.progress&&e&&(s.setState({progress:!0}),setTimeout((function(){s.props.MainStore.DiplomacyStore.sendDelegation(s.props.id)}),3e3))},s.state={progress:!1},s}return(0,s.Z)(r,[{key:"render",value:function(){var e=this.props.MainStore.ReqGenStore.checkReq("delegation",this.props.id,{id:this.props.id,req:this.props.req}),t=this.props.MainStore.ReqGenStore.reqTooltipData("delegation",this.props.req),r="btn btn-dark px-8 3xl:px-4";return e?this.state.progress&&(r+=" btn-progress"):r+=" btn-off",(0,f.jsx)("div",{className:"mx-auto mt-4 mb-3",children:(0,f.jsx)("div",{className:"flex flex-col",children:(0,f.jsx)(d.a,{content:(0,f.jsx)(g.Z,{id:this.props.id,title:(0,c.K)("dip_"+this.props.id),description:(0,c.K)("dip_send_delegation_description"),reqTooltipData:t,prefix:"delegation"}),className:"!max-w-[260px]",touch:["hold",500],placement:l.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,f.jsxs)("button",{type:"button",className:r,onClick:this.handleSend,children:[(0,f.jsx)(m(),{path:x.H7z,className:"icon mr-1 mt-[1px]"}),(0,c.K)("dip_send_delegation")]})})})})}}]),r}(o.Component),y=(0,p.f3)("MainStore")((0,p.Pi)(b)),j=r(8519),k=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"render",value:function(){var e=this,t=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen);return(0,f.jsxs)("div",{className:"mb-3 text-center w-full h-full",children:[(0,f.jsx)("p",{className:"pt-2 text-2xl font-bold text-green-600",children:(0,c.K)("dip_alliance")}),(0,f.jsx)("p",{className:"px-3 py-2 text-green-700",children:(0,c.K)("dip_alliance_description")}),(0,f.jsx)("table",{className:"mt-4 w-3/5 3xl:w-1/2 mx-auto",children:(0,f.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:t.map((function(t,r){return(0,f.jsxs)("tr",{className:r%2===0?"bg-green-300/60 dark:bg-mydark-300 dark:bg-gradient-to-r dark:from-green-900 dark:to-mydark-600":"bg-green-200 dark:bg-mydark-300 dark:bg-gradient-to-r dark:from-green-800 dark:to-mydark-600",children:[(0,f.jsx)("td",{className:"px-4 py-1 text-left whitespace-nowrap",children:t.label}),(0,f.jsx)("td",{className:(0,j.AK)(t.value.indexOf("-")>=0?"text-red-500":"","px-4 py-1 text-right"),children:t.value})]},"gen_alliance_"+e.props.id+r)}))})})]})}}]),r}(o.Component),v=(0,p.f3)("MainStore")((0,p.Pi)(k)),N=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"render",value:function(){var e=this,t=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen);return(0,f.jsxs)("div",{className:"mb-3 text-center w-full h-full",children:[(0,f.jsx)("p",{className:"pt-2 text-2xl font-bold text-green-600",children:(0,c.K)("dip_owned")}),(0,f.jsx)("p",{className:"px-3 py-2 text-green-700",children:(0,c.K)("dip_owned_description")}),(0,f.jsx)("table",{className:"mt-4 w-3/5 3xl:w-1/2 mx-auto",children:(0,f.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:t.map((function(t,r){return(0,f.jsxs)("tr",{className:r%2===0?"bg-green-300/60 dark:bg-mydark-300 dark:bg-gradient-to-r dark:from-green-900 dark:to-mydark-600":"bg-green-200 dark:bg-mydark-300 dark:bg-gradient-to-r dark:from-green-800 dark:to-mydark-600",children:[(0,f.jsx)("td",{className:"px-4 py-1 text-left whitespace-nowrap",children:t.label}),(0,f.jsx)("td",{className:(0,j.AK)(t.value.indexOf("-")>=0?"text-red-500":"","px-4 py-1 text-right"),children:t.value})]},"gen_owned_"+e.props.id+r)}))})})]})}}]),r}(o.Component),_=(0,p.f3)("MainStore")((0,p.Pi)(N)),w=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(e){var s;return(0,i.Z)(this,r),(s=t.call(this,e)).handleAlliance=function(e){s.state.progressAlliance||(e.currentTarget.blur(),s.setState({progressAlliance:!0}),setTimeout((function(){s.props.MainStore.DiplomacyStore.alliance(s.props.id)}),3e3))},s.handleImprove=function(e){var t=s.props.MainStore.DiplomacyStore.positiveRelationship,r=!(s.props.relationship>t)&&s.props.MainStore.ReqGenStore.checkReq("diplomacy",s.props.id,{id:s.props.id,req:s.props.req});!s.state.progressImprove&&r&&(e.currentTarget.blur(),s.setState({progressImprove:!0}),setTimeout((function(){s.props.MainStore.DiplomacyStore.improveRelationship(s.props.id),s.setState({progressImprove:!1})}),3e3))},s.handleInsult=function(e){s.state.progressInsult||(e.currentTarget.blur(),s.setState({progressInsult:!0}),setTimeout((function(){s.props.MainStore.DiplomacyStore.insultRelationship(s.props.id),s.setState({progressInsult:!1})}),3e3))},s.handleWar1=function(e){s.state.progressInsult||(e.currentTarget.blur(),s.props.MainStore.showConfirm("","dip_war_confirm_description",s.handleWar))},s.handleWar=function(){s.props.MainStore.confirmCancelFunc(),s.setState({progressInsult:!0}),setTimeout((function(){s.props.MainStore.DiplomacyStore.war(s.props.id)}),3e3)},s.state={progressAlliance:!1,progressImprove:!1,progressInsult:!1},s}return(0,s.Z)(r,[{key:"render",value:function(){var e=this.props.MainStore.DiplomacyStore,t=e.negativeRelationship,r=e.positiveRelationship,i=!(this.props.relationship>r)&&this.props.MainStore.ReqGenStore.checkReq("diplomacy",this.props.id,{id:this.props.id,req:this.props.req}),s=this.props.relationship>r?[]:this.props.MainStore.ReqGenStore.reqTooltipData("diplomacy",this.props.req),n=this.props.relationship>r?this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen):[],a="";this.props.relationship>r?a+=" border-green-500 dark:border-green-700":this.props.relationship<t&&(a+=" border-red-500 dark:border-red-700");var o="btn btn-green w-full";i?this.state.progressImprove&&(o+=" btn-progress btn-progress-dark"):o+=" btn-off border-green-500 dark:border-green-700";var p="btn btn-red w-full";this.state.progressInsult&&(p+=" btn-progress btn-progress-dark");var h="btn btn-blue w-full";this.state.progressAlliance&&(h+=" btn-progress btn-progress-dark");var u="btn btn-red w-full";return this.state.progressInsult&&(u+=" btn-progress btn-progress-dark"),(0,f.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col "+a,children:[(0,f.jsx)("div",{className:"flex-1 text-center",children:(0,f.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,c.K)("dip_relationships")})}),(0,f.jsx)("div",{className:"flex flex-wrap min-w-full mt-3 h-full",children:(0,f.jsxs)("div",{className:"grid gap-3 min-w-full my-auto px-8 lg:px-12 3xl:px-0",children:[this.props.relationship>r?(0,f.jsx)(d.a,{content:(0,f.jsx)(g.Z,{id:this.props.id,title:(0,c.K)("dip_"+this.props.id),description:(0,c.K)("dip_alliance_description"),genTooltipData:n,prefix:"alliance"}),className:"!max-w-[260px]",touch:["hold",500],placement:l.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,f.jsxs)("button",{type:"button",className:h,onClick:this.handleAlliance,children:[(0,f.jsx)(m(),{path:x.FBh,className:"icon mr-1 mt-[1px]"}),(0,c.K)("dip_alliance")]})}):(0,f.jsx)(d.a,{content:(0,f.jsx)(g.Z,{id:this.props.id,title:(0,c.K)("dip_"+this.props.id),description:(0,c.K)("dip_improve_relationships_description"),reqTooltipData:s,prefix:"improve"}),className:"!max-w-[260px]",touch:["hold",500],placement:l.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,f.jsxs)("button",{type:"button",className:o,onClick:this.handleImprove,children:[(0,f.jsx)(m(),{path:x.E1P,className:"icon mr-1 mt-[1px]"}),(0,f.jsx)("span",{className:"3xl:hidden 4xl:inline",children:(0,c.K)("dip_improve_relationships")}),(0,f.jsx)("span",{className:"hidden 3xl:inline 4xl:hidden",children:(0,c.K)("dip_improve_relationships_abbr")})]})}),this.props.relationship<t?(0,f.jsx)(d.a,{content:(0,c.K)("dip_war_description"),touch:["hold",500],placement:l.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,f.jsxs)("button",{type:"button",className:u,onClick:this.handleWar1,children:[(0,f.jsx)(m(),{path:x.Hne,className:"icon mr-1 mt-[1px]"}),(0,c.K)("dip_war")]})}):(0,f.jsx)(d.a,{content:(0,c.K)("dip_insult_description"),touch:["hold",500],placement:l.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,f.jsxs)("button",{type:"button",className:p,onClick:this.handleInsult,children:[(0,f.jsx)(m(),{path:x.hb5,className:"icon mr-1 mt-[1px]"}),(0,c.K)("dip_insult")]})})]})})]})}}]),r}(o.Component),S=(0,p.f3)("MainStore")((0,p.Pi)(w)),q=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).handleToggleTrade=function(){e.props.MainStore.DiplomacyStore.toggleTrade(e.props.id)},e}return(0,s.Z)(r,[{key:"render",value:function(){var e=this;return(0,f.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col "+(1===this.props.trade?" border-green-500 dark:border-green-700":""),children:[(0,f.jsxs)("div",{className:"flex-1 text-center px-12 3xl:px-0",children:[(0,f.jsx)("h5",{className:"font-bold whitespace-nowrap inline "+(1===this.props.trade?" !text-green-600 dark:!text-green-500":""),children:(0,c.K)("dip_trade_agreements")}),(0,f.jsx)("table",{className:"min-w-full my-4",children:(0,f.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:this.props.resources.map((function(t,r){return(0,f.jsxs)("tr",{className:r%2===0?"bg-gray-200 dark:bg-mydark-300":"",children:[(0,f.jsx)("td",{className:"text-left px-4 py-1 whitespace-nowrap",children:(0,c.K)("res_"+t.id)}),(0,f.jsxs)("td",{className:(0,j.AK)(t.value<0?"text-red-600":"","text-right px-4 py-1"),children:[t.value>0?"+":"",t.value.toLocaleString(),"/s"]})]},e.props.id+"_trade_"+r)}))})})]}),(0,f.jsx)("div",{className:"text-center px-4 lg:px-12 xl:px-8 2xl:px-12 3xl:px-0",children:1===this.props.trade?(0,f.jsxs)("button",{type:"button",className:"btn btn-dark w-full",onClick:this.handleToggleTrade,children:[(0,f.jsx)(m(),{path:x.UEB,className:"icon mr-1 mt-[1px]"}),(0,f.jsx)("span",{className:"3xl:hidden 4xl:inline",children:(0,c.K)("dip_trade_cancel")}),(0,f.jsx)("span",{className:"hidden 3xl:inline 4xl:hidden",children:(0,c.K)("dip_trade_cancel_abbr")})]}):(0,f.jsxs)("button",{type:"button",className:"btn btn-green w-full",onClick:this.handleToggleTrade,children:[(0,f.jsx)(m(),{path:x.p$j,className:"icon mr-1 mt-[1px]"}),(0,f.jsx)("span",{className:"3xl:hidden 4xl:inline",children:(0,c.K)("dip_trade_accept")}),(0,f.jsx)("span",{className:"hidden 3xl:inline 4xl:hidden",children:(0,c.K)("dip_trade_accept_abbr")})]})})]})}}]),r}(o.Component),K=(0,p.f3)("MainStore")((0,p.Pi)(q)),Z=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"render",value:function(){var e=this.props.MainStore.DiplomacyStore.negativeRelationship;return(0,f.jsx)(f.Fragment,{children:1===this.props.runDiplomacy.alliance?(0,f.jsx)(v,{id:this.props.diplomacy.id,gen:this.props.diplomacy.alliance}):1===this.props.runDiplomacy.owned?(0,f.jsx)(_,{id:this.props.diplomacy.id,gen:this.props.diplomacy.gen}):1===this.props.runDiplomacy.war?(0,f.jsx)("div",{className:"flex justify-center text-sm mt-3",children:(0,f.jsx)("div",{className:"min-w-[40%] w-auto",children:(0,f.jsx)(u.Z,{text:(0,c.K)("dip_war_declaration"),type:"war",small:!0})})}):0===this.props.runDiplomacy.relationship?(0,f.jsx)(y,{id:this.props.diplomacy.id,req:this.props.diplomacy.reqDelegation}):(0,f.jsxs)("div",{className:"grid gap-3 3xl:grid-cols-2 min-w-full mt-3",children:[(0,f.jsx)(S,{id:this.props.diplomacy.id,req:this.props.diplomacy.reqImproveRelationship,gen:this.props.diplomacy.alliance,relationship:this.props.runDiplomacy.relationship}),this.props.runDiplomacy.relationship>=e?(0,f.jsx)(K,{id:this.props.diplomacy.id,resources:this.props.diplomacy.commercial,trade:this.props.runDiplomacy.trade}):null]})})}}]),r}(o.Component),M=(0,p.f3)("MainStore")((0,p.Pi)(Z)),D=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"handleKingdomNotification",value:function(e,t){var r=1===t.war&&1!==t.owned&&1!==t.alliance?"war":"green";this.props.MainStore.toggleImageNotification("img_"+e,"img_"+e+"_description",r)}},{key:"render",value:function(){var e=this,t=this.props.MainStore.run.diplomacy,r=this.props.MainStore.DiplomacyStore,i=r.visibleDiplomacy,s=r.negativeRelationship,n=r.positiveRelationship;return(0,f.jsx)("div",{className:"tab-container",children:(0,f.jsx)("div",{className:"flex flex-wrap min-w-full mt-3",children:(0,f.jsx)("div",{className:"grid gap-3 xl:gap-5 xl:grid-cols-2 min-w-full",children:i.length>0?i.map((function(r){var i=t.find((function(e){return e.id===r.id}));return(0,f.jsxs)("div",{className:"flex flex-wrap min-w-full overflow-hidden p-3 shadow rounded-lg ring-1 ring-gray-300 dark:ring-mydark-200 bg-gray-100 dark:bg-mydark-600",children:[(0,f.jsxs)("div",{className:"w-full font-bold h-min",children:[(0,f.jsx)(d.a,{content:(0,f.jsx)(f.Fragment,{children:0===i.relationship?(0,c.K)("dip_relationship_unknown"):i.relationship<s?(0,c.K)("dip_relationship_negative"):i.relationship>n?(0,c.K)("dip_relationship_positive"):(0,c.K)("dip_relationship_neutral")}),touch:["hold",500],placement:l.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:0===i.relationship?(0,f.jsx)(m(),{path:x.Gir,className:"icon inline -mt-1 mr-2 text-gray-500"}):i.relationship<s?(0,f.jsx)(m(),{path:x.fjy,className:"icon inline -mt-1 mr-2 text-red-600"}):i.relationship>n?(0,f.jsx)(m(),{path:x.AV$,className:"icon inline -mt-1 mr-2 text-green-600"}):(0,f.jsx)(m(),{path:x.kaV,className:"icon inline -mt-1 mr-2 text-gray-500"})}),(0,f.jsxs)("button",{type:"button",className:"inline-flex items-center font-bold",onClick:function(){return e.handleKingdomNotification(r.id,i)},children:[(0,c.K)("dip_"+r.id)," ",(0,f.jsx)(m(),{path:x.fOx,className:"icon inline !w-4 ml-1"})]})]}),(0,f.jsx)(M,{runDiplomacy:i,diplomacy:r})]},"dip_card_"+r.id)})):null})})})}}]),r}(o.Component),T=(0,p.f3)("MainStore")((0,p.Pi)(D))}}]);