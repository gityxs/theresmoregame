"use strict";(self.webpackChunkTheresmore=self.webpackChunkTheresmore||[]).push([[697],{4697:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var r=s(9950),a=s(8232),o=s(9977),i=s(4090),n=s.n(i),l=s(2631),p=s(443),d=s(5970),c=s(4414);class h extends r.Component{constructor(){super(...arguments),this.handleQty1=e=>{this.props.MainStore.ArmyStore.setArmyStepQty(1),e.currentTarget.blur()},this.handleQty10=e=>{this.props.MainStore.ArmyStore.setArmyStepQty(10),e.currentTarget.blur()},this.handleQty50=e=>{this.props.MainStore.ArmyStore.setArmyStepQty(50),e.currentTarget.blur()}}render(){const{armyStepQty:e}=this.props.MainStore.ArmyStore,t="btn relative w-full",s=t+" rounded-l-full rounded-r-none"+(1===e?" btn-blue":" btn-dark"),r=t+" rounded-l-none rounded-r-none -ml-px"+(10===e?" btn-blue":" btn-dark"),a=t+" rounded-l-none rounded-r-full -ml-px"+(50===e?" btn-blue":" btn-dark");return(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsxs)("span",{className:"relative inline-flex shadow-sm rounded-full",children:[(0,c.jsx)("button",{type:"button",className:s,onClick:this.handleQty1,children:"+1"}),(0,c.jsx)("button",{type:"button",className:r,onClick:this.handleQty10,children:"+10"}),(0,c.jsx)("button",{type:"button",className:a,onClick:this.handleQty50,children:"+50"})]})})}}const m=(0,a.WQ)("MainStore")((0,a.PA)(h));var x=s(1377),y=s(346),u=s(2073);class b extends r.Component{constructor(e){super(e),this.handleAdd=()=>{this.props.sD?this.props.MainStore.ArmyStore.addArmyQty(this.props.id):!this.state.progress&&this.props.buildable&&(this.setState({progress:!0}),setTimeout((()=>{this.props.MainStore.ArmyStore.addArmyQty(this.props.id),this.setState({progress:!1})}),1e3))},this.handleDismiss=()=>{let e=1;"shift"===this.props.MainStore.keyPress?e+=4:"ctrl"===this.props.MainStore.keyPress&&(e+=9),this.props.MainStore.ArmyStore.dismissArmy(this.props.id,e)},this.state={progress:!1}}render(){const e="undefined"!==typeof this.props.cap&&this.props.qty>=this.props.cap,t=this.props.MainStore.ReqGenStore.reqTooltipData("army",this.props.req,this.props.qty),s=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen);let r="btn btn-dark relative rounded-l-full w-full",a="btn btn-dark relative rounded-r-full rounded-l-none -ml-px w-min",o="";switch(this.props.type){case"recon":o+=" text-blue-700 dark:text-blue-300",r+=" !border-blue-500 dark:!border-blue-700"+o,a+=" !border-blue-500 dark:!border-blue-700"+o;break;case"spy":o+=" text-violet-900 dark:text-violet-300",r+=" !border-violet-500 dark:!border-violet-700"+o,a+=" !border-violet-500 dark:!border-violet-700"+o}return this.props.buildable?this.state.progress&&(r+=" btn-progress btn-progress-1"):r+=e?" btn-off btn-cap":" btn-off",r+=this.props.qty>0?" rounded-r-none":" rounded-r-full",this.props.qty-this.props.away>=1?a+="":a+=" btn-off",(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsxs)("span",{className:"relative inline-flex shadow-sm rounded-full",children:[(0,c.jsx)(y.l,{content:(0,c.jsx)(u.A,{id:this.props.id,title:(0,p.v)("uni_"+this.props.id),titleClasses:o,description:(0,p.v)("uni_"+this.props.id+"_description")+(0!==this.props.category?" ("+(0,p.v)("uni_cat_"+this.props.category)+")":""),owned:!1,reqTooltipData:t,genTooltipData:s,attack:this.props.attack,attackMod:this.props.attackMod,defense:this.props.defense,defenseMod:this.props.defenseMod,prefix:"uni"}),className:"!max-w-[260px]",touch:["hold",500],placement:x.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,c.jsxs)("button",{type:"button",className:r,onClick:this.handleAdd,children:[(0,p.v)("uni_"+this.props.id),(0,c.jsx)("span",{className:"absolute right-0 inline-block py-px px-2 text-gray-600 dark:text-mydark-50 z-[1]",children:1===this.props.category?(0,c.jsx)(n(),{path:l.EwE,className:"icon !w-3.5 opacity-40"}):2===this.props.category?(0,c.jsx)(n(),{path:l.mSZ,className:"icon !w-3.5 opacity-40"}):3===this.props.category?(0,c.jsx)(n(),{path:l.ol,className:"icon !w-3.5 opacity-40"}):4===this.props.category?(0,c.jsx)(n(),{path:l.pA8,className:"icon !w-3.5 opacity-40"}):"recon"===this.props.type?(0,c.jsx)(n(),{path:l.ZiE,className:"icon !w-3.5 opacity-40"}):"spy"===this.props.type?(0,c.jsx)(n(),{path:l.Rjl,className:"icon !w-3.5 opacity-40"}):null}),this.props.qty>0&&!this.state.progress?(0,c.jsx)("span",{className:"absolute -top-2 -right-3 inline-block py-px px-2 rounded-full font-bold text-xs bg-gray-300 text-gray-600 dark:bg-mydark-200 dark:text-mydark-50 z-[1]",children:this.props.qty}):null]})}),this.props.qty>0?(0,c.jsx)(y.l,{content:(0,p.v)("dismiss"),touch:["hold",500],placement:x.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,c.jsx)("button",{type:"button",className:a,onClick:this.handleDismiss,children:(0,c.jsx)(n(),{path:l.ICu,className:"icon"})})}):null]})})}}const g=(0,a.WQ)("MainStore")((0,a.PA)(b));class f extends r.Component{render(){const{run:e,sD:t}=this.props.MainStore,{visibleArmy:s,buildableArmy:r}=this.props.MainStore.ArmyStore;return(0,c.jsx)(c.Fragment,{children:s.length>0?(0,c.jsx)("div",{className:"tab-container sub-container",children:(0,c.jsx)("div",{className:"flex flex-wrap min-w-full mt-3 p-3 shadow rounded-lg ring-1 ring-gray-300 dark:ring-mydark-200 bg-gray-100 dark:bg-mydark-600",children:(0,c.jsxs)("div",{className:"grid gap-3 grid-cols-fill-180 min-w-full px-12 xl:px-0",children:[(0,c.jsx)(m,{}),s.map((s=>{let a=e.army.findIndex((e=>e.id===s.id));const o=-1!==a?e.army[a].value:0,i=-1!==a?e.army[a].away:0;a=r.findIndex((e=>e.id===s.id));const n=-1!==a,l=this.props.MainStore.ArmyStore.calcArmyMods(s.id);return(0,c.jsx)(g,{id:s.id,qty:o,away:i,buildable:n,req:s.req,gen:s.gen,cap:s.cap,type:s.type,category:s.category,attack:s.attack,attackMod:l[0],defense:s.defense,defenseMod:l[1],sD:t},"army_create_"+s.id)}))]})})}):null})}}const k=(0,a.WQ)("MainStore")((0,a.PA)(f));var v=s(9135),j=s(2039);class S extends r.Component{render(){const e=this.props.MainStore.ArmyStore.calcArmyMods("settlement_defenses");return(0,c.jsx)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:(0,c.jsxs)("div",{className:"flex-1 text-center relative px-12 2xl:px-0",children:[(0,c.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,p.v)("uni_settlement_defenses")}),(0,c.jsx)("p",{className:"text-sm 3xl:py-2",children:(0,p.v)("uni_settlement_defenses_description")}),(0,c.jsxs)("div",{className:"px-1 3xl:px-3 pt-2 text-sm text-center whitespace-nowrap",children:[(0,c.jsxs)("span",{className:"mx-3",children:[(0,c.jsxs)("span",{className:"text-red-500",children:[(0,c.jsx)(n(),{path:l.mSZ,className:"icon inline -mt-1 lg:-mt-0.5 xl:-mt-1 3xl:-mt-px mr-1 !w-4"}),j._[0].attack]}),e[0]>0?(0,c.jsxs)("span",{className:"text-green-600 dark:text-green-500",children:[" +",e[0]]}):null]}),(0,c.jsxs)("span",{className:"mx-3",children:[(0,c.jsxs)("span",{className:"text-blue-500",children:[(0,c.jsx)(n(),{path:l.wgn,className:"icon inline -mt-1 lg:-mt-0.5 xl:-mt-1 3xl:-mt-px mr-1 !w-4"}),j._[0].defense]}),e[1]>0?(0,c.jsxs)("span",{className:"text-green-600 dark:text-green-500",children:[" +",e[1]]}):null]})]})]})})}}const N=(0,a.WQ)("MainStore")((0,a.PA)(S));var w=s(2094),A=s(4537),M=s(341),_=s(2823);class C extends r.Component{constructor(e){super(e),this.toggleModal=()=>{this.setState({open:!this.state.open})},this.selectEnemy=e=>{"spy"===this.props.type?this.props.MainStore.updateSpy(e):this.props.MainStore.updateEnemy(e),this.toggleModal()},this.state={open:!1}}enemyRow(e,t){const s=t%2===0?"bg-gray-200 dark:bg-mydark-300":"";let r=[];if("undefined"!==typeof e.level&&e.level>0)for(let a=0;a<e.level;a++){let t="icon inline mr-1 !w-3.5 -mt-1";t+=a>3?" text-red-500":a>1?" text-orange-500":" text-gray-700 dark:text-mydark-50",r.push((0,c.jsx)(n(),{path:l.Du3,className:t},"enemy-level-"+e.value+a))}return(0,c.jsx)("tr",{onClick:()=>this.selectEnemy(e.value),className:s+" hover:bg-gray-300 dark:hover:bg-mydark-700 cursor-pointer "+("spy"===this.props.type?"hover:text-violet-500":"hover:text-red-600"),children:(0,c.jsxs)("td",{className:"px-4 lg:px-6 py-4",children:[(0,c.jsx)("h5",{className:"text-xl font-bold",children:1===e.flag?(0,p.v)("dip_"+e.value):(0,p.v)("ene_"+e.value)}),(0,c.jsx)("div",{children:r}),""!==e.log?(0,c.jsxs)("div",{className:"text-violet-600 dark:text-violet-500",children:[(0,c.jsx)(n(),{path:l.Rjl,className:"icon inline mr-1 !w-3.5 -mt-1"}),e.log]}):null,e.label]})},"enemy-"+e.value)}render(){const{enemiesOptions:e,spyOption:t,enemyOption:s,progressSpy:a,progressAttack:o,progressOracle:i}=this.props.MainStore.ArmyStore;let n=e.length<=0;("spy"===this.props.type&&a||"attack"===this.props.type&&(o||i))&&(n=!0);let l=e.length>0?"spy"===this.props.type?(0,p.v)("select_spy"):(0,p.v)("select_enemy"):"spy"===this.props.type?(0,p.v)("no_spy_enemy"):(0,p.v)("no_attackable_enemy"),d="";return"spy"===this.props.type&&""!==t.label?(l=t.label,d=" border-violet-500 dark:border-violet-700"):"attack"===this.props.type&&""!==s.label&&(l=s.label,d=" border-red-500 dark:border-red-700"),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{type:"button",className:"btn btn-dark w-full mb-4"+d,onClick:this.toggleModal,disabled:n,children:l}),(0,c.jsx)(w.e.Root,{show:this.state.open,as:r.Fragment,children:(0,c.jsxs)(A.l,{as:"div",className:"relative z-50",onClose:this.toggleModal,children:[(0,c.jsx)(_.A,{}),(0,c.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,c.jsx)("div",{className:"flex items-center justify-center min-h-full p-4 text-center lg:p-0",children:(0,c.jsx)(w.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,c.jsxs)(A.l.Panel,{className:"modal-container lg:my-8 lg:max-w-xl lg:pt-6",children:[(0,c.jsx)(M.A,{onClick:this.toggleModal}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"mt-0",children:[(0,c.jsx)(A.l.Title,{as:"h3",className:"modal-title",children:(0,p.v)("enemies").toLowerCase()}),(0,c.jsx)("div",{className:"mt-5",children:(0,c.jsx)("table",{className:"min-w-full",children:(0,c.jsx)("tbody",{className:"bg-gray-100 dark:bg-mydark-600 text-sm",children:e.map(((e,t)=>this.enemyRow(e,t)))})})})]})})]})})})})]})})]})}}const P=(0,a.WQ)("MainStore")((0,a.PA)(C));var T=s(7361),q=s(982);class I extends r.Component{constructor(e){super(e),this.fps=250,this.step=100/(this.props.MainStore.ArmyStore.waitTime/this.fps),this.stepOracle=100/(this.props.MainStore.ArmyStore.waitTimeOracle/this.fps),this.workerInstance=void 0,this.handleExplore=()=>{this.props.MainStore.ArmyStore.setProgressScout(this.step),this.props.MainStore.ArmyStore.startExplore(),this.workerInstance.postMessage(this.fps)},this.handleSpy=()=>{this.props.MainStore.ArmyStore.setProgressSpy(this.step),this.props.MainStore.ArmyStore.startSpy(),this.workerInstance.postMessage(this.fps)},this.handleAttack=()=>{this.props.MainStore.ArmyStore.setProgressAttack(this.step),this.props.MainStore.ArmyStore.startAttack(),this.workerInstance.postMessage(this.fps)},this.handleOracle=()=>{this.props.MainStore.ArmyStore.setProgressOracle(this.stepOracle),this.props.MainStore.ArmyStore.startOracle(),this.workerInstance.postMessage(this.fps)},this.resetExplore=()=>{this.props.MainStore.ArmyStore.resetArmy("recon")},this.resetSpy=()=>{this.props.MainStore.ArmyStore.resetArmy("spy")},this.resetAttack=()=>{this.props.MainStore.ArmyStore.resetArmy("army")},this.allExplore=()=>{this.props.MainStore.ArmyStore.moveAll("recon")},this.allSpy=()=>{this.props.MainStore.ArmyStore.moveAll("spy")},this.allAttack=()=>{this.props.MainStore.ArmyStore.moveAll("army")},this._progressInterval=()=>{"scout"===this.props.type?this.props.MainStore.ArmyStore.progressScout>=100?(this.workerInstance.postMessage("stop"),setTimeout((()=>{this.props.MainStore.ArmyStore.setProgressScout(0)}),this.fps)):this.props.MainStore.ArmyStore.setProgressScout(this.props.MainStore.ArmyStore.progressScout+this.step):"spy"===this.props.type?this.props.MainStore.ArmyStore.progressSpy>=100?(this.workerInstance.postMessage("stop"),setTimeout((()=>{this.props.MainStore.ArmyStore.setProgressSpy(0)}),this.fps)):this.props.MainStore.ArmyStore.setProgressSpy(this.props.MainStore.ArmyStore.progressSpy+this.step):"attack"===this.props.type&&(this.props.MainStore.ArmyStore.progressOracle>0?this.props.MainStore.ArmyStore.progressOracle>=100?(this.workerInstance.postMessage("stop"),setTimeout((()=>{this.props.MainStore.ArmyStore.setProgressOracle(0)}),this.fps)):this.props.MainStore.ArmyStore.setProgressOracle(this.props.MainStore.ArmyStore.progressOracle+this.stepOracle):this.props.MainStore.ArmyStore.progressAttack>=100?(this.workerInstance.postMessage("stop"),setTimeout((()=>{this.props.MainStore.ArmyStore.setProgressAttack(0)}),this.fps)):this.props.MainStore.ArmyStore.setProgressAttack(this.props.MainStore.ArmyStore.progressAttack+this.step))},this.workerInstance=new Worker(T.W),this.workerInstance.onmessage=()=>{this._progressInterval()}}componentWillUnmount(){this.props.check&&this.workerInstance.terminate()}render(){const{progressScout:e,progressSpy:t,progressAttack:s,progressOracle:r,exploreInProgress:a,spyInProgress:o,attackInProgress:i,oracleInProgress:d,oracle:h}=this.props.MainStore.ArmyStore;let m=-1;const x="scout"===this.props.type?a:"spy"===this.props.type?o:i||d;return(0,c.jsx)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:(0,c.jsxs)("div",{className:"flex-1 text-center relative",children:[(0,c.jsx)("h5",{className:"text-xl lg:text-base font-bold whitespace-nowrap inline "+("scout"===this.props.type?"text-blue-600 dark:text-blue-500":"spy"===this.props.type?"text-violet-600 dark:text-violet-500":"text-red-600"),children:"scout"===this.props.type?(0,p.v)("explore"):"spy"===this.props.type?(0,p.v)("tec_espionage"):(0,p.v)("attack")}),Object.keys(this.props.costs).length>0?(0,c.jsxs)(c.Fragment,{children:[x?null:(0,c.jsx)("div",{className:"absolute top-0 right-7",children:(0,c.jsx)("button",{type:"button",className:"text-gray-400 dark:text-mydark-100 "+("scout"===this.props.type?"hover:text-blue-600 dark:hover:text-blue-500 focus:text-blue-600 dark:focus:text-blue-500":"spy"===this.props.type?"hover:text-violet-600 dark:hover:text-violet-500 focus:text-violet-600 dark:focus:text-violet-500":"hover:text-red-600 dark:hover:text-red-600 focus:text-red-600 dark:focus:text-red-600"),onClick:"scout"===this.props.type?this.resetExplore:"spy"===this.props.type?this.resetSpy:this.resetAttack,children:(0,c.jsx)(n(),{path:l.lu1,className:"icon"})})}),(0,c.jsx)("div",{className:"flex",children:(0,c.jsx)("table",{className:"min-w-full my-4",children:(0,c.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:q.Z.map((e=>"undefined"!==typeof this.props.costs[e.id]?(m++,(0,c.jsxs)("tr",{className:m%2===0?"bg-gray-200 dark:bg-mydark-300":"",children:[(0,c.jsx)("td",{className:"text-left px-4 py-1 whitespace-nowrap",children:(0,p.v)("res_"+e.id)}),(0,c.jsx)("td",{className:"text-right px-4 py-1",children:this.props.costs[e.id].toLocaleString()})]},this.props.type+"_cost_"+e.id)):null))})})})]}):(0,c.jsx)("div",{className:"flex justify-center my-4 text-sm",children:(0,c.jsx)("div",{className:"w-auto",children:(0,c.jsx)(v.A,{text:(0,p.v)(this.props.type+"_empty"),type:"info",small:!0})})}),x?null:(0,c.jsx)("div",{className:"absolute top-0 right-0",children:(0,c.jsx)("button",{type:"button",className:"text-gray-400 dark:text-mydark-100 "+("scout"===this.props.type?"hover:text-blue-600 dark:hover:text-blue-500 focus:text-blue-600 dark:focus:text-blue-500":"spy"===this.props.type?"hover:text-violet-600 dark:hover:text-violet-500 focus:text-violet-600 dark:focus:text-violet-500":"hover:text-red-600 dark:hover:text-red-600 focus:text-red-600 dark:focus:text-red-600"),onClick:"scout"===this.props.type?this.allExplore:"spy"===this.props.type?this.allSpy:this.allAttack,children:(0,c.jsx)(n(),{path:l.YSt,className:"icon"})})}),"scout"===this.props.type?(0,c.jsx)("div",{className:"flex flex-wrap",children:e>0?(0,c.jsx)("div",{className:"relative w-full pt-1 pb-px lg:pt-0",children:(0,c.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,c.jsx)("div",{style:{width:e+"%"},className:"flex flex-col bg-blue-500"})})}):(0,c.jsxs)("button",{type:"button",className:"btn mt-[-1px] w-full btn-blue "+(this.props.check?"":"btn-off border-blue-500 dark:border-blue-700"),onClick:this.handleExplore,disabled:!this.props.check,children:[(0,c.jsx)(n(),{path:l.ZiE,className:"icon mr-1 mt-[1px]"}),(0,p.v)("send_to_explore")]})}):"spy"===this.props.type?(0,c.jsxs)("div",{className:"flex flex-wrap",children:[(0,c.jsx)(P,{type:"spy"}),t>0?(0,c.jsx)("div",{className:"relative w-full pt-1 lg:pt-0",children:(0,c.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,c.jsx)("div",{style:{width:t+"%"},className:"flex flex-col bg-violet-500"})})}):(0,c.jsxs)("button",{type:"button",className:"btn mt-[-2px] w-full text-white bg-violet-500 hover:bg-violet-600 focus:bg-violet-700 dark:bg-violet-600 dark:hover:bg-violet-700 dark:focus:bg-violet-800 "+(this.props.check?"":"btn-off border-violet-500 dark:border-violet-700"),onClick:this.handleSpy,disabled:!this.props.check,children:[(0,c.jsx)(n(),{path:l.Rjl,className:"icon mr-1 mt-[1px]"}),(0,p.v)("send_to_spy")]})]}):"attack"===this.props.type?(0,c.jsxs)("div",{className:"flex flex-wrap",children:[(0,c.jsx)(P,{type:"attack"}),h?r>0?(0,c.jsx)("div",{className:"relative w-full pt-1 lg:pt-0",children:(0,c.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-7 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,c.jsx)("div",{style:{width:r+"%"},className:"flex flex-col bg-indigo-500"})})}):(0,c.jsxs)("button",{type:"button",className:"btn mt-[-2px] w-full mb-4 text-white bg-indigo-500 hover:bg-indigo-600 focus:bg-indigo-700 dark:bg-indigo-600 dark:hover:bg-indigo-700 dark:focus:bg-indigo-800 "+(this.props.check?"":"btn-off border-indigo-500 dark:border-indigo-700"),onClick:this.handleOracle,disabled:!this.props.check,children:[(0,c.jsx)(n(),{path:l.Szg,className:"icon mr-1 mt-[1px]"}),(0,p.v)("oracle_button")]}):null,s>0?(0,c.jsx)("div",{className:"relative w-full pt-1 lg:pt-0",children:(0,c.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,c.jsx)("div",{style:{width:s+"%"},className:"flex flex-col bg-red-600 dark:bg-red-700"})})}):(0,c.jsxs)("button",{type:"button",className:"btn mt-[-2px] w-full btn-red "+(this.props.check?"":"btn-off border-red-500 dark:border-red-700"),onClick:this.handleAttack,disabled:!this.props.check,children:[(0,c.jsx)(n(),{path:l.mSZ,className:"icon mr-1 mt-[1px]"}),(0,p.v)("send_to_attack")]})]}):null]})})}}const R=(0,a.WQ)("MainStore")((0,a.PA)(I));var O=s(9182);class Q extends r.Component{constructor(){super(...arguments),this.handleChange=(e,t,s)=>{s>1?e+="increase"===t?s:-s:"shift"===this.props.MainStore.keyPress?e+="increase"===t?4:-4:"ctrl"===this.props.MainStore.keyPress&&(e+="increase"===t?9:-9),"defense"===this.props.type?this.props.MainStore.ArmyStore.updateDefense(this.props.id,e):this.props.MainStore.ArmyStore.updateAway(this.props.id,e)}}render(){return(0,c.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:[(0,c.jsxs)("div",{className:"flex-1 text-center relative mb-2 "+(this.props.reqAttackTooltip?"lg:mb-0":"lg:mb-4"),children:[(0,c.jsx)(y.l,{content:(0,c.jsx)(u.A,{id:this.props.id,title:(0,p.v)("uni_"+this.props.id),description:(0,p.v)("uni_"+this.props.id+"_description")+(0!==this.props.category?" ("+(0,p.v)("uni_cat_"+this.props.category)+")":""),reqTooltipData:this.props.reqAttackTooltip,prefix:"uni_spinner",titleClasses:" pt-3",containerClasses:" lg:hidden"}),className:"!max-w-[260px]",touch:["hold",500],placement:x.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,c.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,p.v)("uni_"+this.props.id)})}),(0,c.jsx)("div",{className:"absolute top-0 right-0",children:1===this.props.category?(0,c.jsx)(n(),{path:l.EwE,className:"icon !w-4 opacity-40"}):2===this.props.category?(0,c.jsx)(n(),{path:l.mSZ,className:"icon !w-4 opacity-40"}):3===this.props.category?(0,c.jsx)(n(),{path:l.ol,className:"icon !w-4 opacity-40"}):4===this.props.category?(0,c.jsx)(n(),{path:l.pA8,className:"icon !w-4 opacity-40"}):"recon"===this.props.uniType?(0,c.jsx)(n(),{path:l.ZiE,className:"icon !w-4 opacity-40"}):"spy"===this.props.uniType?(0,c.jsx)(n(),{path:l.Rjl,className:"icon !w-4 opacity-40"}):null}),this.props.reqAttackTooltip?(0,c.jsx)("table",{className:"min-w-full my-4 hidden lg:table",children:(0,c.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:this.props.reqAttackTooltip.map(((e,t)=>(0,c.jsxs)("tr",{className:t%2===0?"bg-gray-200 dark:bg-mydark-300":"",children:[(0,c.jsx)("td",{className:"text-left px-4 py-1 whitespace-nowrap",children:e.label}),(0,c.jsx)("td",{className:"text-right px-4 py-1",children:e.value})]},this.props.id+"_uni_"+t)))})}):null]}),(0,c.jsx)(O.A,{value:this.props.qty,max:this.props.cap,forceMax:this.props.forceMax,onChange:this.handleChange,disabled:this.props.disabled},"spinner_"+this.props.id)]})}}const W=(0,a.WQ)("MainStore")((0,a.PA)(Q));class E extends r.Component{render(){const{run:e}=this.props.MainStore,{defenseCount:t,scoutCount:s,ownedScout:r,exploreInProgress:a,costsScout:o,checkScout:i,spyCount:n,ownedSpy:l,spyInProgress:d,costsSpy:h,checkSpy:m,armyCount:x,ownedArmy:y,attackInProgress:u,costsAttack:b,checkAttack:g,checkOracle:f,oracleInProgress:k}=this.props.MainStore.ArmyStore,j="scout"===this.props.type?o:"spy"===this.props.type?h:b,S="scout"===this.props.type?i:"spy"===this.props.type?m:g&&f,w="defense"===this.props.type?s+n+x:"scout"===this.props.type?s:"spy"===this.props.type?n:x,A="defense"===this.props.type?r.concat(l).concat(y):"scout"===this.props.type?r:"spy"===this.props.type?l:y;let M="scout"===this.props.type?a:"spy"===this.props.type?d:u||k;return(0,c.jsx)(c.Fragment,{children:w>0||"defense"===this.props.type?(0,c.jsx)("div",{className:"tab-container sub-container",children:(0,c.jsx)("div",{className:"flex flex-wrap min-w-full mt-3",children:(0,c.jsxs)("div",{className:"grid gap-3 grid-cols-fill-270 xl:grid-cols-fill-240 min-w-full",children:["defense"===this.props.type?(0,c.jsx)(N,{}):(0,c.jsx)(R,{costs:j,check:S,type:this.props.type}),w>0?A.map((s=>{if("defense"===this.props.type){let t=e.army.findIndex((e=>e.id===s.id));const r=-1!==t&&"undefined"!==typeof e.army[t].value?e.army[t].value:0,o=-1!==t&&"undefined"!==typeof e.army[t].away?r-e.army[t].away:0;return M="recon"===s.type?a:"spy"===s.type?d:u||k,(0,c.jsx)(W,{id:s.id,qty:o,cap:r,forceMax:!1,disabled:M,category:s.category,type:this.props.type,uniType:s.type},"army_defense_"+s.id)}{let r=e.army.findIndex((e=>e.id===s.id));const a=-1!==r&&"undefined"!==typeof e.army[r].value?e.army[r].value:0,o=-1!==r&&"undefined"!==typeof e.army[r].away?e.army[r].away:0,i=this.props.MainStore.ReqGenStore.reqTooltipData("armyAttack",s.reqAttack,!1,o);return(0,c.jsx)(W,{id:s.id,qty:o,cap:a,forceMax:0===t,reqAttackTooltip:i,disabled:M,category:s.category,type:this.props.type,uniType:s.type},"army_combat_"+s.id)}})):null]})})}):(0,c.jsx)("div",{className:"flex justify-center my-6 text-lg",children:(0,c.jsx)("div",{className:"w-auto",children:(0,c.jsx)(v.A,{text:(0,p.v)(this.props.type+"_empty"),type:"info"})})})})}}const D=(0,a.WQ)("MainStore")((0,a.PA)(E));class F extends r.Component{render(){const e=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen);return(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)(y.l,{content:(0,c.jsx)(u.A,{id:this.props.id,title:"kingdom"===this.props.type?(0,p.v)("dip_"+this.props.id):(0,p.v)("ene_"+this.props.id),description:"kingdom"===this.props.type?(0,p.v)("dip_"+this.props.id+"_description"):(0,p.v)("ene_"+this.props.id+"_description"),genTooltipData:e,prefix:"ene"}),className:"!max-w-[260px]",touch:["hold",500],placement:x.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,c.jsx)("button",{type:"button",className:"btn btn-dark btn-off btn-cap",children:"kingdom"===this.props.type?this.props.owned?(0,p.v)("dip_owned"):(0,p.v)("dip_"+this.props.id):(0,p.v)("ene_"+this.props.id)})})})}}const z=(0,a.WQ)("MainStore")((0,a.PA)(F));class Z extends r.Component{render(){const{ownedEnemies:e}=this.props.MainStore.ArmyStore,{ownedDiplomacy:t}=this.props.MainStore.DiplomacyStore;return(0,c.jsx)(c.Fragment,{children:e.length>0||t.length>0?(0,c.jsx)("div",{className:"tab-container sub-container",children:(0,c.jsx)("div",{className:"flex flex-wrap min-w-full mt-3 p-3 shadow rounded-lg ring-1 ring-gray-300 dark:ring-mydark-200 bg-gray-100 dark:bg-mydark-600",children:(0,c.jsxs)("div",{className:"grid gap-3 grid-cols-fill-180 min-w-full px-12 xl:px-0",children:[t.map((e=>(0,c.jsx)(z,{id:e.id,gen:e.gen,type:"kingdom"},"kingdom_owned_"+e.id))),e.map((e=>(0,c.jsx)(z,{id:e.id,gen:e.gen},"enemy_owned_"+e.id)))]})})}):(0,c.jsx)("div",{className:"flex justify-center my-6 text-lg",children:(0,c.jsx)("div",{className:"w-auto",children:(0,c.jsx)(v.A,{text:(0,p.v)("enemies_empty"),type:"info"})})})})}}const X=(0,a.WQ)("MainStore")((0,a.PA)(Z));class G extends r.Component{constructor(){super(...arguments),this.handleSelect=e=>{this.props.MainStore.ArmyStore.selectTab(e)}}render(){const{selectedTab:e,visibleEspionage:t,cap:s,ownedCount:r,scoutCount:a,scoutAwayCount:i,spyCount:h,spyAwayCount:m,armyCount:x,armyAwayCount:y,defenseCount:u}=this.props.MainStore.ArmyStore,b=(0,d.xW)("armies",t?"espionage":"");let g="inline-flex justify-center rounded-full border shadow-sm px-3 py-2 text-sm whitespace-nowrap border-gray-400 dark:border-gray-500";g+=" xl:block xl:rounded-none xl:border-0 xl:shadow-none lg:px-2 xl:border-transparent xl:dark:border-transparent",g+=" xl:border-b-2 xl:m-[-1px] 4xl:px-6 3xl:text-base";const f="!border-ancestor text-ancestor",v="xl:border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-mydark-50 hover:border-gray-400 dark:hover:border-gray-500";return(0,c.jsxs)(o.o.Group,{selectedIndex:e,onChange:this.handleSelect,children:[(0,c.jsx)("div",{className:"mx-auto border-b border-gray-300 dark:border-mydark-200 flex justify-center mt-1 xl:mt-0",children:(0,c.jsxs)(o.o.List,{className:"grid grid-cols-2 gap-3 my-2 mb-3 lg:gap-1 lg:mt-0 lg:mb-1 xl:flex xl:mb-0 2xl:gap-3",children:[(0,c.jsxs)(o.o,{className:e=>{let{selected:t}=e;return(0,d.xW)(g,t?f:v)},children:[(0,p.v)("army"),(0,c.jsx)(n(),{path:l.BNE,className:"icon inline 3xl:-mt-1 mx-1"}),r," / ",s]}),(0,c.jsxs)(o.o,{className:e=>{let{selected:t}=e;return(0,d.xW)(g,t?f:v)},children:[(0,p.v)("explore"),(0,c.jsx)(n(),{path:l.ZiE,className:"icon inline 3xl:-mt-1 mx-1"}),i," / ",a]}),t?(0,c.jsxs)(o.o,{className:e=>{let{selected:t}=e;return(0,d.xW)(g,t?f:v)},children:[(0,p.v)("spy"),(0,c.jsx)(n(),{path:l.Rjl,className:"icon inline 3xl:-mt-1 mx-1"}),m," / ",h]}):null,(0,c.jsxs)(o.o,{className:e=>{let{selected:t}=e;return(0,d.xW)(g,t?f:v)},children:[(0,p.v)("attack"),(0,c.jsx)(n(),{path:l.mSZ,className:"icon inline 3xl:-mt-1 mx-1"}),y," / ",x]}),(0,c.jsxs)(o.o,{className:e=>{let{selected:t}=e;return(0,d.xW)(g,t?f:v)},children:[(0,p.v)("garrison"),(0,c.jsx)(n(),{path:l.wgn,className:"icon inline 3xl:-mt-1 mx-1"}),u," / ",r]}),(0,c.jsxs)(o.o,{className:e=>{let{selected:t}=e;return(0,d.xW)(g,t?f:v)},children:[(0,c.jsx)(n(),{path:l.o0C,className:"icon inline lg:-mt-1 mr-1"}),(0,p.v)("enemies")]})]})}),(0,c.jsxs)(o.o.Panels,{children:[(0,c.jsx)(o.o.Panel,{children:(0,c.jsx)(k,{})}),(0,c.jsx)(o.o.Panel,{children:(0,c.jsx)(D,{type:"scout"})}),t?(0,c.jsx)(o.o.Panel,{children:(0,c.jsx)(D,{type:"spy"})}):null,(0,c.jsx)(o.o.Panel,{children:(0,c.jsx)(D,{type:"attack"})}),(0,c.jsx)(o.o.Panel,{children:(0,c.jsx)(D,{type:"defense"})}),(0,c.jsx)(o.o.Panel,{children:(0,c.jsx)(X,{})})]})]},b)}}const L=(0,a.WQ)("MainStore")((0,a.PA)(G))},9182:(e,t,s)=>{s.d(t,{A:()=>l});var r=s(9950),a=s(4090),o=s.n(a),i=s(2631),n=s(4414);class l extends r.Component{constructor(e){super(e),this.decrease=e=>{e.currentTarget.blur(),this._decrease(this.state.step)},this.decreaseX=e=>{e.currentTarget.blur(),this._decrease(this.state.stepX)},this.increase=e=>{e.currentTarget.blur(),this._increase(this.state.step)},this.increaseX=e=>{e.currentTarget.blur(),this._increase(this.state.stepX)},this.state={value:this.props.value,min:0,max:this.props.max,forceMax:this.props.forceMax,step:1,stepX:9,minReached:this.props.value<=0,maxReached:this.props.value>=this.props.max||this.props.forceMax,disabled:"undefined"!==typeof this.props.disabled&&this.props.disabled}}componentDidUpdate(e){this.props.max===e.max&&this.props.forceMax===e.forceMax&&this.props.value===e.value&&this.props.disabled===e.disabled||this.setState({value:this.props.value,max:this.props.max,forceMax:this.props.forceMax,minReached:this.props.value<=0,maxReached:this.props.value>=this.props.max||this.props.forceMax,disabled:"undefined"!==typeof this.props.disabled&&this.props.disabled})}_decrease(e){let t=!1,s=this.state.value-1;s<=this.state.min&&(s=this.state.min,t=!0),this.setState({value:s,minReached:t,maxReached:s>=this.state.max||this.state.forceMax}),this.props.onChange(s,"decrease",e)}_increase(e){let t=!1,s=this.state.value+1;this.state.forceMax?(s=this.state.value,t=!0):s>=this.state.max&&(s=this.state.max,t=!0),this.setState({value:s,maxReached:t,minReached:s<=this.state.min}),this.props.onChange(s,"increase",e)}render(){let e="btn shadow-none px-2.5 w-min",t=e;e+=" rounded-none lg:rounded-xl lg:rounded-r-none",t+=" lg:hidden rounded-xl rounded-r-none",this.state.minReached||this.state.disabled?(e+=" btn-dark",t+=" btn-dark !border-r-transparent"):(e+=" btn-red",t+=" btn-red border-r-red-600 dark:border-r-red-700");let s="btn shadow-none px-2.5 w-min",r=s;return s+=" rounded-none lg:rounded-xl lg:rounded-l-none",r+=" lg:hidden rounded-xl rounded-l-none",this.state.maxReached||this.state.disabled?(s+=" btn-dark",r+=" btn-dark !border-l-transparent"):(s+=" btn-green",r+=" btn-green border-l-green-700"),(0,n.jsxs)("div",{className:"relative inline-flex min-w-full shadow-sm rounded-full",children:[(0,n.jsx)("button",{className:t,type:"button",onClick:this.decreaseX,disabled:this.state.minReached||this.state.disabled,children:(0,n.jsx)(o(),{path:i.XzY,className:"icon"})}),(0,n.jsxs)("button",{className:e,type:"button",onClick:this.decrease,disabled:this.state.minReached||this.state.disabled,children:[(0,n.jsx)(o(),{path:i.wzK,className:"icon lg:hidden"}),(0,n.jsx)(o(),{path:i.XzY,className:"icon hidden lg:block"})]}),(0,n.jsx)("input",{type:"text",className:"w-full min-w-[70px] text-center lg:text-sm text-gray-700 bg-gray-100 dark:text-mydark-50 dark:bg-mydark-400 border-y border-gray-400 dark:border-mydark-200",value:this.state.value+" / "+this.state.max,disabled:!0}),(0,n.jsxs)("button",{className:s,type:"button",onClick:this.increase,disabled:this.state.maxReached||this.state.disabled,children:[(0,n.jsx)(o(),{path:i.GWk,className:"icon lg:hidden"}),(0,n.jsx)(o(),{path:i.biz,className:"icon hidden lg:block"})]}),(0,n.jsx)("button",{className:r,type:"button",onClick:this.increaseX,disabled:this.state.maxReached||this.state.disabled,children:(0,n.jsx)(o(),{path:i.biz,className:"icon"})})]})}}}}]);