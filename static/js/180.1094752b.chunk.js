"use strict";(self.webpackChunkTheresmore=self.webpackChunkTheresmore||[]).push([[180],{1180:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(9950),i=s(8232),r=s(4090),n=s.n(r),o=s(2631),d=s(443),l=s(9135),p=s(1377),h=s(346),c=s(2073),x=s(5970),u=s(9182),m=s(4414);class b extends a.Component{constructor(){super(...arguments),this.handleChange=(e,t,s)=>{let a="increase"===t?1:-1;s>1?(e+="increase"===t?s:-s,a+="increase"===t?s:-s):"shift"===this.props.MainStore.keyPress?(e+="increase"===t?4:-4,a+="increase"===t?4:-4):"ctrl"===this.props.MainStore.keyPress&&(e+="increase"===t?9:-9,a+="increase"===t?9:-9),this.props.MainStore.PopulationStore.updatePopulation(this.props.id,e,a)}}render(){let e=[];return 0===this.props.qty&&this.props.gen.forEach((t=>{const s=(0,d.v)("res_"+t.id),a=this.props.modTooltip.findIndex((e=>e.label===s)),i=(t.value<0?"-":"+")+(-1===a?"":this.props.modTooltip[a].value);e.push({label:s,value:i})})),(0,m.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:[(0,m.jsxs)("div",{className:"flex-1 text-center mb-2 lg:mb-0",children:[0===this.props.modTooltip.length&&0===e.length?(0,m.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,d.v)("pop_"+this.props.id)}):(0,m.jsx)(h.l,{content:(0,m.jsx)(c.A,{id:this.props.id,title:(0,d.v)("pop_"+this.props.id),modTooltipData:e.concat(this.props.modTooltip),prefix:"pop",titleClasses:" pt-3"}),touch:["hold",500],placement:p.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,m.jsx)("h5",{className:"font-bold whitespace-nowrap inline py-4 lg:p-0",children:(0,d.v)("pop_"+this.props.id)})}),(0,m.jsx)("table",{className:"min-w-full my-4 hidden lg:table",children:(0,m.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:this.props.gen.map(((e,t)=>{const s=(0,d.v)("res_"+e.id),a=this.props.modTooltip.findIndex((e=>e.label===s));return(0,m.jsxs)("tr",{className:t%2===0?"bg-gray-200 dark:bg-mydark-300":"",children:[(0,m.jsx)("td",{className:(0,x.xW)(-1===a&&e.value<0?"text-red-600":"","text-left px-4 py-1 whitespace-nowrap"),children:s}),(0,m.jsx)("td",{className:(0,x.xW)(e.value<0?"text-red-600":"","text-right px-4 py-1"),children:-1===a?e.value<0?"-":"+":this.props.modTooltip[a].value})]},this.props.id+"_pop_"+t)}))})})]}),(0,m.jsx)(u.A,{value:this.props.qty,max:this.props.cap,forceMax:this.props.forceMax,onChange:this.handleChange,small:!0},"spinner_"+this.props.id)]})}}const f=(0,i.WQ)("MainStore")((0,i.PA)(b));class g extends a.Component{constructor(){super(...arguments),this.handleReset=()=>{this.props.MainStore.PopulationStore.resetPopulation()}}render(){const{run:e}=this.props.MainStore,{population:t,qtyUnemployed:s}=this.props.MainStore.PopulationStore;let a=e.population.findIndex((e=>e.id===t[0].id));const i=-1!==a&&"undefined"!==typeof e.population[a].value?e.population[a].value:0;a=e.caps.findIndex((e=>e.id===t[0].id));const r=-1!==a?e.caps[a].value:0;return(0,m.jsx)(m.Fragment,{children:t.length>1?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex justify-center mx-auto pt-3 font-bold text-lg",children:[(0,d.v)("pop_"+t[0].id),(0,m.jsxs)("span",{className:"ml-2",children:[i," / ",r]}),i<r?(0,m.jsx)("button",{type:"button",className:"ml-2 mt-0.5 text-gray-400 dark:text-mydark-200 hover:text-red-600 dark:hover:text-red-600 focus:text-red-600 dark:focus:text-red-600",onClick:this.handleReset,children:(0,m.jsx)(n(),{path:o.lu1,className:"icon"})}):null]}),(0,m.jsx)("div",{className:"tab-container sub-container",children:(0,m.jsx)("div",{className:"flex flex-wrap min-w-full mt-3",children:(0,m.jsx)("div",{className:"grid gap-3 grid-cols-fill-270 xl:grid-cols-fill-200 min-w-full",children:t.map((t=>{if("unemployed"===t.id)return null;let a=e.population.findIndex((e=>e.id===t.id));const i=-1!==a&&"undefined"!==typeof e.population[a].value?e.population[a].value:0;a=e.caps.findIndex((e=>e.id===t.id));const r=-1!==a?e.caps[a].value:0;let n=[];return"unemployed"!==t.id&&(n=this.props.MainStore.ModifiersStore.modTooltipData(t.id)),(0,m.jsx)(f,{id:t.id,cap:r,forceMax:0===s,qty:i,gen:t.gen,modTooltip:n},"population_"+t.id)}))})})})]}):(0,m.jsx)("div",{className:"flex justify-center my-6 text-lg",children:(0,m.jsx)("div",{className:"w-auto",children:(0,m.jsx)(l.A,{text:(0,d.v)("population_empty"),type:"info"})})})})}}const v=(0,i.WQ)("MainStore")((0,i.PA)(g))},9182:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(9950),i=s(4090),r=s.n(i),n=s(2631),o=s(4414);class d extends a.Component{constructor(e){super(e),this.decrease=e=>{e.currentTarget.blur(),this._decrease(this.state.step)},this.decreaseX=e=>{e.currentTarget.blur(),this._decrease(this.state.stepX)},this.increase=e=>{e.currentTarget.blur(),this._increase(this.state.step)},this.increaseX=e=>{e.currentTarget.blur(),this._increase(this.state.stepX)},this.state={value:this.props.value,min:0,max:this.props.max,forceMax:this.props.forceMax,step:1,stepX:9,minReached:this.props.value<=0,maxReached:this.props.value>=this.props.max||this.props.forceMax,disabled:"undefined"!==typeof this.props.disabled&&this.props.disabled}}componentDidUpdate(e){this.props.max===e.max&&this.props.forceMax===e.forceMax&&this.props.value===e.value&&this.props.disabled===e.disabled||this.setState({value:this.props.value,max:this.props.max,forceMax:this.props.forceMax,minReached:this.props.value<=0,maxReached:this.props.value>=this.props.max||this.props.forceMax,disabled:"undefined"!==typeof this.props.disabled&&this.props.disabled})}_decrease(e){let t=!1,s=this.state.value-1;s<=this.state.min&&(s=this.state.min,t=!0),this.setState({value:s,minReached:t,maxReached:s>=this.state.max||this.state.forceMax}),this.props.onChange(s,"decrease",e)}_increase(e){let t=!1,s=this.state.value+1;this.state.forceMax?(s=this.state.value,t=!0):s>=this.state.max&&(s=this.state.max,t=!0),this.setState({value:s,maxReached:t,minReached:s<=this.state.min}),this.props.onChange(s,"increase",e)}render(){let e="btn shadow-none px-2.5 w-min",t=e;e+=" rounded-none lg:rounded-xl lg:rounded-r-none",t+=" lg:hidden rounded-xl rounded-r-none",this.state.minReached||this.state.disabled?(e+=" btn-dark",t+=" btn-dark !border-r-transparent"):(e+=" btn-red",t+=" btn-red border-r-red-600 dark:border-r-red-700");let s="btn shadow-none px-2.5 w-min",a=s;return s+=" rounded-none lg:rounded-xl lg:rounded-l-none",a+=" lg:hidden rounded-xl rounded-l-none",this.state.maxReached||this.state.disabled?(s+=" btn-dark",a+=" btn-dark !border-l-transparent"):(s+=" btn-green",a+=" btn-green border-l-green-700"),(0,o.jsxs)("div",{className:"relative inline-flex min-w-full shadow-sm rounded-full",children:[(0,o.jsx)("button",{className:t,type:"button",onClick:this.decreaseX,disabled:this.state.minReached||this.state.disabled,children:(0,o.jsx)(r(),{path:n.XzY,className:"icon"})}),(0,o.jsxs)("button",{className:e,type:"button",onClick:this.decrease,disabled:this.state.minReached||this.state.disabled,children:[(0,o.jsx)(r(),{path:n.wzK,className:"icon lg:hidden"}),(0,o.jsx)(r(),{path:n.XzY,className:"icon hidden lg:block"})]}),(0,o.jsx)("input",{type:"text",className:"w-full min-w-[70px] text-center lg:text-sm text-gray-700 bg-gray-100 dark:text-mydark-50 dark:bg-mydark-400 border-y border-gray-400 dark:border-mydark-200",value:this.state.value+" / "+this.state.max,disabled:!0}),(0,o.jsxs)("button",{className:s,type:"button",onClick:this.increase,disabled:this.state.maxReached||this.state.disabled,children:[(0,o.jsx)(r(),{path:n.GWk,className:"icon lg:hidden"}),(0,o.jsx)(r(),{path:n.biz,className:"icon hidden lg:block"})]}),(0,o.jsx)("button",{className:a,type:"button",onClick:this.increaseX,disabled:this.state.maxReached||this.state.disabled,children:(0,o.jsx)(r(),{path:n.biz,className:"icon"})})]})}}}}]);