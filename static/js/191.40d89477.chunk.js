"use strict";(self.webpackChunkTheresmore=self.webpackChunkTheresmore||[]).push([[191],{8191:function(e,t,s){s.r(t),s.d(t,{default:function(){return L}});var r=s(5671),a=s(3144),n=s(9340),o=s(2882),i=s(7313),p=s(2126),l=s(927),d=s(8561),c=s.n(d),h=s(8966),m=s(8982),u=s(8519),y=s(6417),x=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleQty1=function(t){e.props.MainStore.ArmyStore.setArmyStepQty(1),t.currentTarget.blur()},e.handleQty10=function(t){e.props.MainStore.ArmyStore.setArmyStepQty(10),t.currentTarget.blur()},e.handleQty50=function(t){e.props.MainStore.ArmyStore.setArmyStepQty(50),t.currentTarget.blur()},e}return(0,a.Z)(s,[{key:"render",value:function(){var e=this.props.MainStore.ArmyStore.armyStepQty,t="btn relative w-full",s=t+" rounded-l-full rounded-r-none"+(1===e?" btn-blue":" btn-dark"),r=t+" rounded-l-none rounded-r-none -ml-px"+(10===e?" btn-blue":" btn-dark"),a=t+" rounded-l-none rounded-r-full -ml-px"+(50===e?" btn-blue":" btn-dark");return(0,y.jsx)("div",{className:"flex flex-col",children:(0,y.jsxs)("span",{className:"relative inline-flex shadow-sm rounded-full",children:[(0,y.jsx)("button",{type:"button",className:s,onClick:this.handleQty1,children:"+1"}),(0,y.jsx)("button",{type:"button",className:r,onClick:this.handleQty10,children:"+10"}),(0,y.jsx)("button",{type:"button",className:a,onClick:this.handleQty50,children:"+50"})]})})}}]),s}(i.Component),f=(0,p.f3)("MainStore")((0,p.Pi)(x)),b=s(4862),g=s(7914),k=s(5339),v=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(e){var a;return(0,r.Z)(this,s),(a=t.call(this,e)).handleAdd=function(){a.props.sD?a.props.MainStore.ArmyStore.addArmyQty(a.props.id):!a.state.progress&&a.props.buildable&&(a.setState({progress:!0}),setTimeout((function(){a.props.MainStore.ArmyStore.addArmyQty(a.props.id),a.setState({progress:!1})}),1e3))},a.handleDismiss=function(){a.props.MainStore.ArmyStore.dismissArmy(a.props.id)},a.state={progress:!1},a}return(0,a.Z)(s,[{key:"render",value:function(){var e="undefined"!==typeof this.props.cap&&this.props.qty>=this.props.cap,t=this.props.MainStore.ReqGenStore.reqTooltipData("army",this.props.req,this.props.qty),s=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen),r="btn btn-dark relative rounded-l-full rounded-r-none w-full",a="btn btn-dark relative rounded-r-full rounded-l-none -ml-px w-min",n="";switch(this.props.type){case"recon":r+=" !border-blue-500 dark:!border-blue-700"+(n+=" text-blue-700 dark:text-blue-300"),a+=" !border-blue-500 dark:!border-blue-700"+n;break;case"spy":r+=" !border-violet-500 dark:!border-violet-700"+(n+=" text-violet-900 dark:text-violet-300"),a+=" !border-violet-500 dark:!border-violet-700"+n}return this.props.buildable?this.state.progress&&(r+=" btn-progress btn-progress-1"):r+=e?" btn-off btn-cap":" btn-off",r+=this.props.qty>0?"":" rounded-r-full",this.props.qty-this.props.away>=1?a+="":a+=" btn-off",(0,y.jsx)("div",{className:"flex flex-col",children:(0,y.jsxs)("span",{className:"relative inline-flex shadow-sm rounded-full",children:[(0,y.jsx)(g.a,{content:(0,y.jsx)(k.Z,{id:this.props.id,title:(0,m.K)("uni_"+this.props.id),titleClasses:n,description:(0,m.K)("uni_"+this.props.id+"_description")+(0!==this.props.category?" ("+(0,m.K)("uni_cat_"+this.props.category)+")":""),owned:!1,reqTooltipData:t,genTooltipData:s,attack:this.props.attack,attackMod:this.props.attackMod,defense:this.props.defense,defenseMod:this.props.defenseMod,prefix:"uni"}),className:"!max-w-[260px]",touch:["hold",500],placement:b.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,y.jsxs)("button",{type:"button",className:r,onClick:this.handleAdd,children:[(0,m.K)("uni_"+this.props.id),(0,y.jsx)("span",{className:"absolute right-0 inline-block py-px px-2 text-gray-600 dark:text-mydark-50 z-[1]",children:1===this.props.category?(0,y.jsx)(c(),{path:h.YFH,className:"icon !w-3.5 opacity-40"}):2===this.props.category?(0,y.jsx)(c(),{path:h.Hne,className:"icon !w-3.5 opacity-40"}):3===this.props.category?(0,y.jsx)(c(),{path:h.hhU,className:"icon !w-3.5 opacity-40"}):4===this.props.category?(0,y.jsx)(c(),{path:h.XWK,className:"icon !w-3.5 opacity-40"}):"recon"===this.props.type?(0,y.jsx)(c(),{path:h.r8w,className:"icon !w-3.5 opacity-40"}):"spy"===this.props.type?(0,y.jsx)(c(),{path:h.XT1,className:"icon !w-3.5 opacity-40"}):null}),this.props.qty>0&&!this.state.progress?(0,y.jsx)("span",{className:"absolute -top-2 -right-3 inline-block py-px px-2 rounded-full font-bold text-xs bg-gray-300 text-gray-600 dark:bg-mydark-200 dark:text-mydark-50 z-[1]",children:this.props.qty}):null]})}),this.props.qty>0?(0,y.jsx)(g.a,{content:(0,m.K)("dismiss"),touch:["hold",500],placement:b.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,y.jsx)("button",{type:"button",className:a,onClick:this.handleDismiss,children:(0,y.jsx)(c(),{path:h.$Qg,className:"icon"})})}):null]})})}}]),s}(i.Component),j=(0,p.f3)("MainStore")((0,p.Pi)(v)),S=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){var e=this,t=this.props.MainStore,s=t.run,r=t.sD,a=this.props.MainStore.ArmyStore,n=a.visibleArmy,o=a.buildableArmy;return(0,y.jsx)(y.Fragment,{children:n.length>0?(0,y.jsx)("div",{className:"tab-container sub-container",children:(0,y.jsx)("div",{className:"flex flex-wrap min-w-full mt-3 p-3 shadow rounded-lg ring-1 ring-gray-300 dark:ring-mydark-200 bg-gray-100 dark:bg-mydark-600",children:(0,y.jsxs)("div",{className:"grid gap-3 grid-cols-fill-180 min-w-full px-12 xl:px-0",children:[(0,y.jsx)(f,{}),n.map((function(t){var a=s.army.findIndex((function(e){return e.id===t.id})),n=-1!==a?s.army[a].value:0,i=-1!==a?s.army[a].away:0,p=-1!==(a=o.findIndex((function(e){return e.id===t.id}))),l=e.props.MainStore.ArmyStore.calcArmyMods(t.id);return(0,y.jsx)(j,{id:t.id,qty:n,away:i,buildable:p,req:t.req,gen:t.gen,cap:t.cap,type:t.type,category:t.category,attack:t.attack,attackMod:l[0],defense:t.defense,defenseMod:l[1],sD:r},"army_create_"+t.id)}))]})})}):null})}}]),s}(i.Component),N=(0,p.f3)("MainStore")((0,p.Pi)(S)),w=s(1231),A=s(4671),M=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){var e=this.props.MainStore.ArmyStore.calcArmyMods("settlement_defenses");return(0,y.jsx)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:(0,y.jsxs)("div",{className:"flex-1 text-center relative px-12 2xl:px-0",children:[(0,y.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,m.K)("uni_settlement_defenses")}),(0,y.jsx)("p",{className:"text-sm 3xl:py-2",children:(0,m.K)("uni_settlement_defenses_description")}),(0,y.jsxs)("div",{className:"px-1 3xl:px-3 pt-2 text-sm text-center whitespace-nowrap",children:[(0,y.jsxs)("span",{className:"mx-3",children:[(0,y.jsxs)("span",{className:"text-red-500",children:[(0,y.jsx)(c(),{path:h.Hne,className:"icon inline -mt-1 lg:-mt-0.5 xl:-mt-1 3xl:-mt-px mr-1 !w-4"}),A.b[0].attack]}),e[0]>0?(0,y.jsxs)("span",{className:"text-green-600 dark:text-green-500",children:[" +",e[0]]}):null]}),(0,y.jsxs)("span",{className:"mx-3",children:[(0,y.jsxs)("span",{className:"text-blue-500",children:[(0,y.jsx)(c(),{path:h.pCE,className:"icon inline -mt-1 lg:-mt-0.5 xl:-mt-1 3xl:-mt-px mr-1 !w-4"}),A.b[0].defense]}),e[1]>0?(0,y.jsxs)("span",{className:"text-green-600 dark:text-green-500",children:[" +",e[1]]}):null]})]})]})})}}]),s}(i.Component),_=(0,p.f3)("MainStore")((0,p.Pi)(M)),Z=s(1875),C=s(2453),K=s(1048),P=s(6934),T=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(e){var a;return(0,r.Z)(this,s),(a=t.call(this,e)).toggleModal=function(){a.setState({open:!a.state.open})},a.selectEnemy=function(e){"spy"===a.props.type?a.props.MainStore.updateSpy(e):a.props.MainStore.updateEnemy(e),a.toggleModal()},a.state={open:!1},a}return(0,a.Z)(s,[{key:"enemyRow",value:function(e,t){var s=this,r=t%2===0?"bg-gray-200 dark:bg-mydark-300":"",a=[];if("undefined"!==typeof e.level&&e.level>0)for(var n=0;n<e.level;n++){var o="icon inline mr-1 !w-3.5 -mt-1";o+=n>3?" text-red-500":n>1?" text-orange-500":" text-gray-700 dark:text-mydark-50",a.push((0,y.jsx)(c(),{path:h.h27,className:o},"enemy-level-"+e.value+n))}return(0,y.jsx)("tr",{onClick:function(){return s.selectEnemy(e.value)},className:r+" hover:bg-gray-300 dark:hover:bg-mydark-700 cursor-pointer "+("spy"===this.props.type?"hover:text-violet-500":"hover:text-red-600"),children:(0,y.jsxs)("td",{className:"px-4 lg:px-6 py-4",children:[(0,y.jsx)("h5",{className:"text-xl font-bold",children:1===e.flag?(0,m.K)("dip_"+e.value):(0,m.K)("ene_"+e.value)}),(0,y.jsx)("div",{children:a}),e.label]})},"enemy-"+e.value)}},{key:"render",value:function(){var e=this,t=this.props.MainStore.ArmyStore,s=t.enemiesOptions,r=t.spyOption,a=t.enemyOption,n=t.progressSpy,o=t.progressAttack,p=s.length<=0;("spy"===this.props.type&&n||"attack"===this.props.type&&o)&&(p=!0);var l=s.length>0?"spy"===this.props.type?(0,m.K)("select_spy"):(0,m.K)("select_enemy"):"spy"===this.props.type?(0,m.K)("no_spy_enemy"):(0,m.K)("no_attackable_enemy"),d="";return"spy"===this.props.type&&""!==r.label?(l=r.label,d=" border-violet-500 dark:border-violet-700"):"attack"===this.props.type&&""!==a.label&&(l=a.label,d=" border-red-500 dark:border-red-700"),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{type:"button",className:"btn btn-dark w-full mb-4"+d,onClick:this.toggleModal,disabled:p,children:l}),(0,y.jsx)(Z.u.Root,{show:this.state.open,as:i.Fragment,children:(0,y.jsxs)(C.V,{as:"div",className:"relative z-50",onClose:this.toggleModal,children:[(0,y.jsx)(P.Z,{}),(0,y.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,y.jsx)("div",{className:"flex items-center justify-center min-h-full p-4 text-center lg:p-0",children:(0,y.jsx)(Z.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,y.jsxs)(C.V.Panel,{className:"modal-container lg:my-8 lg:max-w-xl lg:pt-6",children:[(0,y.jsx)(K.Z,{onClick:this.toggleModal}),(0,y.jsx)("div",{children:(0,y.jsxs)("div",{className:"mt-0",children:[(0,y.jsx)(C.V.Title,{as:"h3",className:"modal-title",children:(0,m.K)("enemies").toLowerCase()}),(0,y.jsx)("div",{className:"mt-5",children:(0,y.jsx)("table",{className:"min-w-full",children:(0,y.jsx)("tbody",{className:"bg-gray-100 dark:bg-mydark-600 text-sm",children:s.map((function(t,s){return e.enemyRow(t,s)}))})})})]})})]})})})})]})})]})}}]),s}(i.Component),q=(0,p.f3)("MainStore")((0,p.Pi)(T)),I=s(8806),O=s(8033),R=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(e){var a;return(0,r.Z)(this,s),(a=t.call(this,e)).fps=250,a.step=100/(a.props.MainStore.ArmyStore.waitTime/a.fps),a.workerInstance=void 0,a.handleExplore=function(){a.props.MainStore.ArmyStore.setProgressScout(a.step),a.props.MainStore.ArmyStore.startExplore(),a.workerInstance.postMessage(a.fps)},a.handleSpy=function(){a.props.MainStore.ArmyStore.setProgressSpy(a.step),a.props.MainStore.ArmyStore.startSpy(),a.workerInstance.postMessage(a.fps)},a.handleAttack=function(){a.props.MainStore.ArmyStore.setProgressAttack(a.step),a.props.MainStore.ArmyStore.startAttack(),a.workerInstance.postMessage(a.fps)},a.resetExplore=function(){a.props.MainStore.ArmyStore.resetArmy("recon")},a.resetSpy=function(){a.props.MainStore.ArmyStore.resetArmy("spy")},a.resetAttack=function(){a.props.MainStore.ArmyStore.resetArmy("army")},a.allExplore=function(){a.props.MainStore.ArmyStore.moveAll("recon")},a.allSpy=function(){a.props.MainStore.ArmyStore.moveAll("spy")},a.allAttack=function(){a.props.MainStore.ArmyStore.moveAll("army")},a._progressInterval=function(){"scout"===a.props.type?a.props.MainStore.ArmyStore.progressScout>=100?(a.workerInstance.postMessage("stop"),setTimeout((function(){a.props.MainStore.ArmyStore.setProgressScout(0)}),a.fps)):a.props.MainStore.ArmyStore.setProgressScout(a.props.MainStore.ArmyStore.progressScout+a.step):"spy"===a.props.type?a.props.MainStore.ArmyStore.progressSpy>=100?(a.workerInstance.postMessage("stop"),setTimeout((function(){a.props.MainStore.ArmyStore.setProgressSpy(0)}),a.fps)):a.props.MainStore.ArmyStore.setProgressSpy(a.props.MainStore.ArmyStore.progressSpy+a.step):"attack"===a.props.type&&(a.props.MainStore.ArmyStore.progressAttack>=100?(a.workerInstance.postMessage("stop"),setTimeout((function(){a.props.MainStore.ArmyStore.setProgressAttack(0)}),a.fps)):a.props.MainStore.ArmyStore.setProgressAttack(a.props.MainStore.ArmyStore.progressAttack+a.step))},a.workerInstance=new Worker(I.E),a.workerInstance.onmessage=function(){a._progressInterval()},a}return(0,a.Z)(s,[{key:"componentWillUnmount",value:function(){this.props.check&&this.workerInstance.terminate()}},{key:"render",value:function(){var e=this,t=this.props.MainStore.ArmyStore,s=t.progressScout,r=t.progressSpy,a=t.progressAttack,n=t.exploreInProgress,o=t.spyInProgress,i=t.attackInProgress,p=-1,l="scout"===this.props.type?n:"spy"===this.props.type?o:i;return(0,y.jsx)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:(0,y.jsxs)("div",{className:"flex-1 text-center relative",children:[(0,y.jsx)("h5",{className:"text-xl lg:text-base font-bold whitespace-nowrap inline "+("scout"===this.props.type?"text-blue-600 dark:text-blue-500":"spy"===this.props.type?"text-violet-600 dark:text-violet-500":"text-red-600"),children:"scout"===this.props.type?(0,m.K)("explore"):"spy"===this.props.type?(0,m.K)("tec_espionage"):(0,m.K)("attack")}),Object.keys(this.props.costs).length>0?(0,y.jsxs)(y.Fragment,{children:[l?null:(0,y.jsx)("div",{className:"absolute top-0 right-7",children:(0,y.jsx)("button",{type:"button",className:"text-gray-400 dark:text-mydark-100 "+("scout"===this.props.type?"hover:text-blue-600 dark:hover:text-blue-500 focus:text-blue-600 dark:focus:text-blue-500":"spy"===this.props.type?"hover:text-violet-600 dark:hover:text-violet-500 focus:text-violet-600 dark:focus:text-violet-500":"hover:text-red-600 dark:hover:text-red-600 focus:text-red-600 dark:focus:text-red-600"),onClick:"scout"===this.props.type?this.resetExplore:"spy"===this.props.type?this.resetSpy:this.resetAttack,children:(0,y.jsx)(c(),{path:h.M_e,className:"icon"})})}),(0,y.jsx)("div",{className:"flex",children:(0,y.jsx)("table",{className:"min-w-full my-4",children:(0,y.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:O.v.map((function(t){return"undefined"!==typeof e.props.costs[t.id]?(p++,(0,y.jsxs)("tr",{className:p%2===0?"bg-gray-200 dark:bg-mydark-300":"",children:[(0,y.jsx)("td",{className:"text-left px-4 py-1 whitespace-nowrap",children:(0,m.K)("res_"+t.id)}),(0,y.jsx)("td",{className:"text-right px-4 py-1",children:e.props.costs[t.id].toLocaleString()})]},e.props.type+"_cost_"+t.id)):null}))})})})]}):(0,y.jsx)("div",{className:"flex justify-center my-4 text-sm",children:(0,y.jsx)("div",{className:"w-auto",children:(0,y.jsx)(w.Z,{text:(0,m.K)(this.props.type+"_empty"),type:"info",small:!0})})}),l?null:(0,y.jsx)("div",{className:"absolute top-0 right-0",children:(0,y.jsx)("button",{type:"button",className:"text-gray-400 dark:text-mydark-100 "+("scout"===this.props.type?"hover:text-blue-600 dark:hover:text-blue-500 focus:text-blue-600 dark:focus:text-blue-500":"spy"===this.props.type?"hover:text-violet-600 dark:hover:text-violet-500 focus:text-violet-600 dark:focus:text-violet-500":"hover:text-red-600 dark:hover:text-red-600 focus:text-red-600 dark:focus:text-red-600"),onClick:"scout"===this.props.type?this.allExplore:"spy"===this.props.type?this.allSpy:this.allAttack,children:(0,y.jsx)(c(),{path:h.KkW,className:"icon"})})}),"scout"===this.props.type?(0,y.jsx)("div",{className:"flex flex-wrap",children:s>0?(0,y.jsx)("div",{className:"relative w-full pt-1 pb-px lg:pt-0",children:(0,y.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,y.jsx)("div",{style:{width:s+"%"},className:"flex flex-col bg-blue-500"})})}):(0,y.jsxs)("button",{type:"button",className:"btn mt-[-1px] w-full btn-blue "+(this.props.check?"":"btn-off border-blue-500 dark:border-blue-700"),onClick:this.handleExplore,disabled:!this.props.check,children:[(0,y.jsx)(c(),{path:h.r8w,className:"icon mr-1 mt-[1px]"}),(0,m.K)("send_to_explore")]})}):"spy"===this.props.type?(0,y.jsxs)("div",{className:"flex flex-wrap",children:[(0,y.jsx)(q,{type:"spy"}),r>0?(0,y.jsx)("div",{className:"relative w-full pt-1 lg:pt-0",children:(0,y.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,y.jsx)("div",{style:{width:r+"%"},className:"flex flex-col bg-violet-500"})})}):(0,y.jsxs)("button",{type:"button",className:"btn mt-[-2px] w-full text-white bg-violet-500 hover:bg-violet-600 focus:bg-violet-700 dark:bg-violet-600 dark:hover:bg-violet-700 dark:focus:bg-violet-800 "+(this.props.check?"":"btn-off border-violet-500 dark:border-violet-700"),onClick:this.handleSpy,disabled:!this.props.check,children:[(0,y.jsx)(c(),{path:h.XT1,className:"icon mr-1 mt-[1px]"}),(0,m.K)("send_to_spy")]})]}):"attack"===this.props.type?(0,y.jsxs)("div",{className:"flex flex-wrap",children:[(0,y.jsx)(q,{type:"attack"}),a>0?(0,y.jsx)("div",{className:"relative w-full pt-1 lg:pt-0",children:(0,y.jsx)("div",{className:"overflow-hidden h-4 mt-2 mb-3 flex rounded-full bg-gray-100 dark:bg-mydark-500 border border-gray-300 dark:border-mydark-200",children:(0,y.jsx)("div",{style:{width:a+"%"},className:"flex flex-col bg-red-600 dark:bg-red-700"})})}):(0,y.jsxs)("button",{type:"button",className:"btn mt-[-2px] w-full btn-red "+(this.props.check?"":"btn-off border-red-500 dark:border-red-700"),onClick:this.handleAttack,disabled:!this.props.check,children:[(0,y.jsx)(c(),{path:h.Hne,className:"icon mr-1 mt-[1px]"}),(0,m.K)("send_to_attack")]})]}):null]})})}}]),s}(i.Component),D=(0,p.f3)("MainStore")((0,p.Pi)(R)),E=s(2171),X=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t,s,r){r>1?t+="increase"===s?r:-r:"shift"===e.props.MainStore.keyPress?t+="increase"===s?4:-4:"ctrl"===e.props.MainStore.keyPress&&(t+="increase"===s?9:-9),"defense"===e.props.type?e.props.MainStore.ArmyStore.updateDefense(e.props.id,t):e.props.MainStore.ArmyStore.updateAway(e.props.id,t)},e}return(0,a.Z)(s,[{key:"render",value:function(){var e=this;return(0,y.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col",children:[(0,y.jsxs)("div",{className:"flex-1 text-center relative mb-2 "+(this.props.reqAttackTooltip?"lg:mb-0":"lg:mb-4"),children:[(0,y.jsx)(g.a,{content:(0,y.jsx)(k.Z,{id:this.props.id,title:(0,m.K)("uni_"+this.props.id),description:(0,m.K)("uni_"+this.props.id+"_description")+(0!==this.props.category?" ("+(0,m.K)("uni_cat_"+this.props.category)+")":""),reqTooltipData:this.props.reqAttackTooltip,prefix:"uni_spinner",titleClasses:" pt-3",containerClasses:" lg:hidden"}),className:"!max-w-[260px]",touch:["hold",500],placement:b.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,y.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,m.K)("uni_"+this.props.id)})}),(0,y.jsx)("div",{className:"absolute top-0 right-0",children:1===this.props.category?(0,y.jsx)(c(),{path:h.YFH,className:"icon !w-4 opacity-40"}):2===this.props.category?(0,y.jsx)(c(),{path:h.Hne,className:"icon !w-4 opacity-40"}):3===this.props.category?(0,y.jsx)(c(),{path:h.hhU,className:"icon !w-4 opacity-40"}):4===this.props.category?(0,y.jsx)(c(),{path:h.XWK,className:"icon !w-4 opacity-40"}):"recon"===this.props.uniType?(0,y.jsx)(c(),{path:h.r8w,className:"icon !w-4 opacity-40"}):"spy"===this.props.uniType?(0,y.jsx)(c(),{path:h.XT1,className:"icon !w-4 opacity-40"}):null}),this.props.reqAttackTooltip?(0,y.jsx)("table",{className:"min-w-full my-4 hidden lg:table",children:(0,y.jsx)("tbody",{className:"bg-gray-300 dark:bg-mydark-600 text-sm",children:this.props.reqAttackTooltip.map((function(t,s){return(0,y.jsxs)("tr",{className:s%2===0?"bg-gray-200 dark:bg-mydark-300":"",children:[(0,y.jsx)("td",{className:"text-left px-4 py-1 whitespace-nowrap",children:t.label}),(0,y.jsx)("td",{className:"text-right px-4 py-1",children:t.value})]},e.props.id+"_uni_"+s)}))})}):null]}),(0,y.jsx)(E.Z,{value:this.props.qty,max:this.props.cap,forceMax:this.props.forceMax,onChange:this.handleChange,disabled:this.props.disabled},"spinner_"+this.props.id)]})}}]),s}(i.Component),Q=(0,p.f3)("MainStore")((0,p.Pi)(X)),F=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){var e=this,t=this.props.MainStore.run,s=this.props.MainStore.ArmyStore,r=s.defenseCount,a=s.scoutCount,n=s.ownedScout,o=s.exploreInProgress,i=s.costsScout,p=s.checkScout,l=s.spyCount,d=s.ownedSpy,c=s.spyInProgress,h=s.costsSpy,u=s.checkSpy,x=s.armyCount,f=s.ownedArmy,b=s.attackInProgress,g=s.costsAttack,k=s.checkAttack,v="scout"===this.props.type?i:"spy"===this.props.type?h:g,j="scout"===this.props.type?p:"spy"===this.props.type?u:k,S="defense"===this.props.type?a+l+x:"scout"===this.props.type?a:"spy"===this.props.type?l:x,N="defense"===this.props.type?n.concat(d).concat(f):"scout"===this.props.type?n:"spy"===this.props.type?d:f,A="scout"===this.props.type?o:"spy"===this.props.type?c:b;return(0,y.jsx)(y.Fragment,{children:S>0||"defense"===this.props.type?(0,y.jsx)("div",{className:"tab-container sub-container",children:(0,y.jsx)("div",{className:"flex flex-wrap min-w-full mt-3",children:(0,y.jsxs)("div",{className:"grid gap-3 grid-cols-fill-270 xl:grid-cols-fill-240 min-w-full",children:["defense"===this.props.type?(0,y.jsx)(_,{}):(0,y.jsx)(D,{costs:v,check:j,type:this.props.type}),S>0?N.map((function(s){if("defense"===e.props.type){var a=t.army.findIndex((function(e){return e.id===s.id})),n=-1!==a&&"undefined"!==typeof t.army[a].value?t.army[a].value:0,i=-1!==a&&"undefined"!==typeof t.army[a].away?n-t.army[a].away:0;return A="recon"===s.type?o:"spy"===s.type?c:b,(0,y.jsx)(Q,{id:s.id,qty:i,cap:n,forceMax:!1,disabled:A,category:s.category,type:e.props.type,uniType:s.type},"army_defense_"+s.id)}var p=t.army.findIndex((function(e){return e.id===s.id})),l=-1!==p&&"undefined"!==typeof t.army[p].value?t.army[p].value:0,d=-1!==p&&"undefined"!==typeof t.army[p].away?t.army[p].away:0,h=e.props.MainStore.ReqGenStore.reqTooltipData("armyAttack",s.reqAttack,!1,d);return(0,y.jsx)(Q,{id:s.id,qty:d,cap:l,forceMax:0===r,reqAttackTooltip:h,disabled:A,category:s.category,type:e.props.type,uniType:s.type},"army_combat_"+s.id)})):null]})})}):(0,y.jsx)("div",{className:"flex justify-center my-6 text-lg",children:(0,y.jsx)("div",{className:"w-auto",children:(0,y.jsx)(w.Z,{text:(0,m.K)(this.props.type+"_empty"),type:"info"})})})})}}]),s}(i.Component),H=(0,p.f3)("MainStore")((0,p.Pi)(F)),U=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){var e=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen);return(0,y.jsx)("div",{className:"flex flex-col",children:(0,y.jsx)(g.a,{content:(0,y.jsx)(k.Z,{id:this.props.id,title:"kingdom"===this.props.type?(0,m.K)("dip_"+this.props.id):(0,m.K)("ene_"+this.props.id),description:"kingdom"===this.props.type?(0,m.K)("dip_"+this.props.id+"_description"):(0,m.K)("ene_"+this.props.id+"_description"),genTooltipData:e,prefix:"ene"}),className:"!max-w-[260px]",touch:["hold",500],placement:b.tq?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,y.jsx)("button",{type:"button",className:"btn btn-dark btn-off btn-cap",children:"kingdom"===this.props.type?this.props.owned?(0,m.K)("dip_owned"):(0,m.K)("dip_"+this.props.id):(0,m.K)("ene_"+this.props.id)})})})}}]),s}(i.Component),G=(0,p.f3)("MainStore")((0,p.Pi)(U)),W=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){var e=this.props.MainStore.ArmyStore.ownedEnemies,t=this.props.MainStore.DiplomacyStore.ownedDiplomacy;return(0,y.jsx)(y.Fragment,{children:e.length>0||t.length>0?(0,y.jsx)("div",{className:"tab-container sub-container",children:(0,y.jsx)("div",{className:"flex flex-wrap min-w-full mt-3 p-3 shadow rounded-lg ring-1 ring-gray-300 dark:ring-mydark-200 bg-gray-100 dark:bg-mydark-600",children:(0,y.jsxs)("div",{className:"grid gap-3 grid-cols-fill-180 min-w-full px-12 xl:px-0",children:[t.map((function(e){return(0,y.jsx)(G,{id:e.id,gen:e.gen,type:"kingdom"},"kingdom_owned_"+e.id)})),e.map((function(e){return(0,y.jsx)(G,{id:e.id,gen:e.gen},"enemy_owned_"+e.id)}))]})})}):(0,y.jsx)("div",{className:"flex justify-center my-6 text-lg",children:(0,y.jsx)("div",{className:"w-auto",children:(0,y.jsx)(w.Z,{text:(0,m.K)("enemies_empty"),type:"info"})})})})}}]),s}(i.Component),z=(0,p.f3)("MainStore")((0,p.Pi)(W)),Y=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(){var e;(0,r.Z)(this,s);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleSelect=function(t){e.props.MainStore.ArmyStore.selectTab(t)},e}return(0,a.Z)(s,[{key:"render",value:function(){var e=this.props.MainStore.ArmyStore,t=e.selectedTab,s=e.visibleEspionage,r=e.cap,a=e.ownedCount,n=e.scoutCount,o=e.scoutAwayCount,i=e.spyCount,p=e.spyAwayCount,d=e.armyCount,x=e.armyAwayCount,f=e.defenseCount,b=(0,u.AK)("armies",s?"espionage":""),g="inline-flex justify-center rounded-full border shadow-sm px-3 py-2 text-sm whitespace-nowrap border-gray-400 dark:border-gray-500";g+=" xl:block xl:rounded-none xl:border-0 xl:shadow-none lg:px-2 xl:border-transparent xl:dark:border-transparent",g+=" xl:border-b-2 xl:m-[-1px] 4xl:px-6 3xl:text-base";var k="!border-ancestor text-ancestor",v="xl:border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-mydark-50 hover:border-gray-400 dark:hover:border-gray-500";return(0,y.jsxs)(l.O.Group,{selectedIndex:t,onChange:this.handleSelect,children:[(0,y.jsx)("div",{className:"mx-auto border-b border-gray-300 dark:border-mydark-200 flex justify-center mt-1 xl:mt-0",children:(0,y.jsxs)(l.O.List,{className:"grid grid-cols-2 gap-3 my-2 mb-3 lg:gap-1 lg:mt-0 lg:mb-1 xl:flex xl:mb-0 2xl:gap-3",children:[(0,y.jsxs)(l.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("army"),(0,y.jsx)(c(),{path:h.UeY,className:"icon inline 3xl:-mt-1 mx-1"}),a," / ",r]}),(0,y.jsxs)(l.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("explore"),(0,y.jsx)(c(),{path:h.r8w,className:"icon inline 3xl:-mt-1 mx-1"}),o," / ",n]}),s?(0,y.jsxs)(l.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("spy"),(0,y.jsx)(c(),{path:h.XT1,className:"icon inline 3xl:-mt-1 mx-1"}),p," / ",i]}):null,(0,y.jsxs)(l.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("attack"),(0,y.jsx)(c(),{path:h.Hne,className:"icon inline 3xl:-mt-1 mx-1"}),x," / ",d]}),(0,y.jsxs)(l.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,m.K)("garrison"),(0,y.jsx)(c(),{path:h.pCE,className:"icon inline 3xl:-mt-1 mx-1"}),f," / ",a]}),(0,y.jsxs)(l.O,{className:function(e){var t=e.selected;return(0,u.AK)(g,t?k:v)},children:[(0,y.jsx)(c(),{path:h.YKm,className:"icon inline lg:-mt-1 mr-1"}),(0,m.K)("enemies")]})]})}),(0,y.jsxs)(l.O.Panels,{children:[(0,y.jsx)(l.O.Panel,{children:(0,y.jsx)(N,{})}),(0,y.jsx)(l.O.Panel,{children:(0,y.jsx)(H,{type:"scout"})}),s?(0,y.jsx)(l.O.Panel,{children:(0,y.jsx)(H,{type:"spy"})}):null,(0,y.jsx)(l.O.Panel,{children:(0,y.jsx)(H,{type:"attack"})}),(0,y.jsx)(l.O.Panel,{children:(0,y.jsx)(H,{type:"defense"})}),(0,y.jsx)(l.O.Panel,{children:(0,y.jsx)(z,{})})]})]},b)}}]),s}(i.Component),L=(0,p.f3)("MainStore")((0,p.Pi)(Y))},2171:function(e,t,s){s.d(t,{Z:function(){return h}});var r=s(5671),a=s(3144),n=s(9340),o=s(2882),i=s(7313),p=s(8561),l=s.n(p),d=s(8966),c=s(6417),h=function(e){(0,n.Z)(s,e);var t=(0,o.Z)(s);function s(e){var a;return(0,r.Z)(this,s),(a=t.call(this,e)).decrease=function(e){e.currentTarget.blur(),a._decrease(a.state.step)},a.decreaseX=function(e){e.currentTarget.blur(),a._decrease(a.state.stepX)},a.increase=function(e){e.currentTarget.blur(),a._increase(a.state.step)},a.increaseX=function(e){e.currentTarget.blur(),a._increase(a.state.stepX)},a.state={value:a.props.value,min:0,max:a.props.max,forceMax:a.props.forceMax,step:1,stepX:9,minReached:a.props.value<=0,maxReached:a.props.value>=a.props.max||a.props.forceMax,disabled:"undefined"!==typeof a.props.disabled&&a.props.disabled},a}return(0,a.Z)(s,[{key:"componentDidUpdate",value:function(e){this.props.max===e.max&&this.props.forceMax===e.forceMax&&this.props.value===e.value&&this.props.disabled===e.disabled||this.setState({value:this.props.value,max:this.props.max,forceMax:this.props.forceMax,minReached:this.props.value<=0,maxReached:this.props.value>=this.props.max||this.props.forceMax,disabled:"undefined"!==typeof this.props.disabled&&this.props.disabled})}},{key:"_decrease",value:function(e){var t=!1,s=this.state.value-1;s<=this.state.min&&(s=this.state.min,t=!0),this.setState({value:s,minReached:t,maxReached:s>=this.state.max||this.state.forceMax}),this.props.onChange(s,"decrease",e)}},{key:"_increase",value:function(e){var t=!1,s=this.state.value+1;this.state.forceMax?(s=this.state.value,t=!0):s>=this.state.max&&(s=this.state.max,t=!0),this.setState({value:s,maxReached:t,minReached:s<=this.state.min}),this.props.onChange(s,"increase",e)}},{key:"render",value:function(){var e="btn shadow-none px-2.5 w-min",t=e;e+=" rounded-none lg:rounded-xl lg:rounded-r-none",t+=" lg:hidden rounded-xl rounded-r-none",this.state.minReached||this.state.disabled?(e+=" btn-dark",t+=" btn-dark !border-r-transparent"):(e+=" btn-red",t+=" btn-red border-r-red-600 dark:border-r-red-700");var s="btn shadow-none px-2.5 w-min",r=s;return s+=" rounded-none lg:rounded-xl lg:rounded-l-none",r+=" lg:hidden rounded-xl rounded-l-none",this.state.maxReached||this.state.disabled?(s+=" btn-dark",r+=" btn-dark !border-l-transparent"):(s+=" btn-green",r+=" btn-green border-l-green-700"),(0,c.jsxs)("div",{className:"relative inline-flex min-w-full shadow-sm rounded-full",children:[(0,c.jsx)("button",{className:t,type:"button",onClick:this.decreaseX,disabled:this.state.minReached||this.state.disabled,children:(0,c.jsx)(l(),{path:d.UHA,className:"icon"})}),(0,c.jsxs)("button",{className:e,type:"button",onClick:this.decrease,disabled:this.state.minReached||this.state.disabled,children:[(0,c.jsx)(l(),{path:d.v5B,className:"icon lg:hidden"}),(0,c.jsx)(l(),{path:d.UHA,className:"icon hidden lg:block"})]}),(0,c.jsx)("input",{type:"text",className:"w-full min-w-[70px] text-center lg:text-sm text-gray-700 bg-gray-100 dark:text-mydark-50 dark:bg-mydark-400 border-y border-gray-400 dark:border-mydark-200",value:this.state.value+" / "+this.state.max,disabled:!0}),(0,c.jsxs)("button",{className:s,type:"button",onClick:this.increase,disabled:this.state.maxReached||this.state.disabled,children:[(0,c.jsx)(l(),{path:d.MUM,className:"icon lg:hidden"}),(0,c.jsx)(l(),{path:d.qX5,className:"icon hidden lg:block"})]}),(0,c.jsx)("button",{className:r,type:"button",onClick:this.increaseX,disabled:this.state.maxReached||this.state.disabled,children:(0,c.jsx)(l(),{path:d.qX5,className:"icon"})})]})}}]),s}(i.Component)}}]);