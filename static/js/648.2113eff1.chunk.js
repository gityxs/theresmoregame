"use strict";(self.webpackChunkTheresmore=self.webpackChunkTheresmore||[]).push([[648],{9648:(e,s,t)=>{t.r(s),t.d(s,{default:()=>q});var i=t(9950),r=t(8232),n=t(1377),o=t(346),a=t(443),l=t(4090),p=t.n(l),d=t(2631),c=t(9135),h=t(2073),m=t(4414);class x extends i.Component{constructor(e){super(e),this.handleSend=()=>{const e=this.props.MainStore.ReqGenStore.checkReq("delegation",this.props.id,{id:this.props.id,req:this.props.req});!this.state.progress&&e&&(this.setState({progress:!0}),setTimeout((()=>{this.props.MainStore.DiplomacyStore.sendDelegation(this.props.id)}),3e3))},this.state={progress:!1}}render(){const e=this.props.MainStore.ReqGenStore.checkReq("delegation",this.props.id,{id:this.props.id,req:this.props.req});let s=this.props.MainStore.ReqGenStore.reqTooltipData("delegation",this.props.req),t="btn btn-dark px-8 3xl:px-4";return e?this.state.progress&&(t+=" btn-progress"):t+=" btn-off",(0,m.jsx)("div",{className:"mx-auto mt-4 mb-3",children:(0,m.jsx)("div",{className:"flex flex-col",children:(0,m.jsx)(o.l,{content:(0,m.jsx)(h.A,{id:this.props.id,title:(0,a.v)("dip_"+this.props.id),description:(0,a.v)("dip_send_delegation_description"),reqTooltipData:s,prefix:"delegation"}),className:"!max-w-[260px]",touch:["hold",500],placement:n.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,m.jsxs)("button",{type:"button",className:t,onClick:this.handleSend,children:[(0,m.jsx)(p(),{path:d.LU7,className:"icon mr-1 mt-[1px]"}),(0,a.v)("dip_send_delegation")]})})})})}}const g=(0,r.WQ)("MainStore")((0,r.PA)(x));var u=t(5970);class b extends i.Component{render(){const e=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen);return(0,m.jsxs)("div",{className:"mb-3 text-center w-full h-full",children:[(0,m.jsx)("p",{className:"pt-2 text-2xl font-bold text-green-600",children:(0,a.v)("dip_alliance")}),(0,m.jsx)("p",{className:"px-3 py-2 text-green-700",children:(0,a.v)("dip_alliance_description")}),(0,m.jsx)("div",{className:"mt-4 w-3/5 3xl:w-1/2 mx-auto",children:(0,m.jsx)("div",{className:"rounded border border-green-200 dark:border-green-800 overflow-hidden",children:e.map(((e,s)=>{const t=e.value.indexOf("-")>=0,i=s%2===0;return(0,m.jsxs)("div",{className:(0,u.xW)("flex items-center justify-between px-2 py-1 text-sm",i?"bg-green-300/60 dark:bg-green-900/30":"bg-green-200 dark:bg-green-900/15",""),children:[(0,m.jsx)("span",{className:"truncate max-w-[140px]",children:e.label}),(0,m.jsx)("span",{className:(0,u.xW)("font-medium ml-2",t?"text-red-500":""),children:e.value})]},"gen_alliance_"+this.props.id+s)}))})})]})}}const f=(0,r.WQ)("MainStore")((0,r.PA)(b));class v extends i.Component{render(){const e=this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen);return(0,m.jsxs)("div",{className:"mb-3 text-center w-full h-full",children:[(0,m.jsx)("p",{className:"pt-2 text-2xl font-bold text-green-600",children:(0,a.v)("dip_owned")}),(0,m.jsx)("p",{className:"px-3 py-2 text-green-700",children:(0,a.v)("dip_owned_description")}),(0,m.jsx)("div",{className:"mt-4 w-3/5 3xl:w-1/2 mx-auto",children:(0,m.jsx)("div",{className:"rounded border border-green-200 dark:border-green-800 overflow-hidden",children:e.map(((e,s)=>{const t=e.value.indexOf("-")>=0,i=s%2===0;return(0,m.jsxs)("div",{className:(0,u.xW)("flex items-center justify-between px-2 py-1 text-sm",i?"bg-green-300/60 dark:bg-green-900/30":"bg-green-200 dark:bg-green-900/15",""),children:[(0,m.jsx)("span",{className:"truncate max-w-[140px]",children:e.label}),(0,m.jsx)("span",{className:(0,u.xW)("font-medium ml-2",t?"text-red-500":""),children:e.value})]},"gen_owned_"+this.props.id+s)}))})})]})}}const j=(0,r.WQ)("MainStore")((0,r.PA)(v));class y extends i.Component{constructor(e){super(e),this.handleAlliance=e=>{this.state.progressAlliance||(e.currentTarget.blur(),this.setState({progressAlliance:!0}),setTimeout((()=>{this.props.MainStore.DiplomacyStore.alliance(this.props.id)}),3e3))},this.handleImprove=e=>{const{positiveRelationship:s}=this.props.MainStore.DiplomacyStore,t=!(this.props.relationship>s)&&this.props.MainStore.ReqGenStore.checkReq("diplomacy",this.props.id,{id:this.props.id,req:this.props.req});!this.state.progressImprove&&t&&(e.currentTarget.blur(),this.setState({progressImprove:!0}),setTimeout((()=>{this.props.MainStore.DiplomacyStore.improveRelationship(this.props.id),this.setState({progressImprove:!1})}),3e3))},this.handleInsult=e=>{this.state.progressInsult||(e.currentTarget.blur(),this.setState({progressInsult:!0}),setTimeout((()=>{this.props.MainStore.DiplomacyStore.insultRelationship(this.props.id),this.setState({progressInsult:!1})}),3e3))},this.handleWar1=e=>{this.state.progressInsult||(e.currentTarget.blur(),this.props.MainStore.showConfirm("","dip_war_confirm_description",this.handleWar))},this.handleWar=()=>{this.props.MainStore.confirmCancelFunc(),this.setState({progressInsult:!0}),setTimeout((()=>{this.props.MainStore.DiplomacyStore.war(this.props.id)}),3e3)},this.state={progressAlliance:!1,progressImprove:!1,progressInsult:!1}}render(){const{negativeRelationship:e,positiveRelationship:s}=this.props.MainStore.DiplomacyStore,t=!(this.props.relationship>s)&&this.props.MainStore.ReqGenStore.checkReq("diplomacy",this.props.id,{id:this.props.id,req:this.props.req}),i=this.props.relationship>s?[]:this.props.MainStore.ReqGenStore.reqTooltipData("diplomacy",this.props.req),r=this.props.relationship>s?this.props.MainStore.ReqGenStore.genTooltipData(this.props.gen):[];let l="";this.props.relationship>s?l+=" border-green-500 dark:border-green-700":this.props.relationship<e&&(l+=" border-red-500 dark:border-red-700");let c="btn btn-green w-full";t?this.state.progressImprove&&(c+=" btn-progress btn-progress-dark"):c+=" btn-off border-green-500 dark:border-green-700";let x="btn btn-red w-full";this.state.progressInsult&&(x+=" btn-progress btn-progress-dark");let g="btn btn-blue w-full";this.state.progressAlliance&&(g+=" btn-progress btn-progress-dark");let u="btn btn-red w-full";return this.state.progressInsult&&(u+=" btn-progress btn-progress-dark"),(0,m.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col "+l,children:[(0,m.jsx)("div",{className:"flex-1 text-center",children:(0,m.jsx)("h5",{className:"font-bold whitespace-nowrap inline",children:(0,a.v)("dip_relationships")})}),(0,m.jsx)("div",{className:"flex flex-wrap min-w-full mt-3 h-full",children:(0,m.jsxs)("div",{className:"grid gap-3 min-w-full my-auto px-8 lg:px-12 3xl:px-0",children:[this.props.relationship>s?(0,m.jsx)(o.l,{content:(0,m.jsx)(h.A,{id:this.props.id,title:(0,a.v)("dip_"+this.props.id),description:(0,a.v)("dip_alliance_description"),genTooltipData:r,prefix:"alliance"}),className:"!max-w-[260px]",touch:["hold",500],placement:n.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,m.jsxs)("button",{type:"button",className:g,onClick:this.handleAlliance,children:[(0,m.jsx)(p(),{path:d.ahW,className:"icon mr-1 mt-[1px]"}),(0,a.v)("dip_alliance")]})}):(0,m.jsx)(o.l,{content:(0,m.jsx)(h.A,{id:this.props.id,title:(0,a.v)("dip_"+this.props.id),description:(0,a.v)("dip_improve_relationships_description"),reqTooltipData:i,prefix:"improve"}),className:"!max-w-[260px]",touch:["hold",500],placement:n.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,m.jsxs)("button",{type:"button",className:c,onClick:this.handleImprove,children:[(0,m.jsx)(p(),{path:d.StA,className:"icon mr-1 mt-[1px]"}),(0,m.jsx)("span",{className:"3xl:hidden 4xl:inline",children:(0,a.v)("dip_improve_relationships")}),(0,m.jsx)("span",{className:"hidden 3xl:inline 4xl:hidden",children:(0,a.v)("dip_improve_relationships_abbr")})]})}),this.props.relationship<e?(0,m.jsx)(o.l,{content:(0,a.v)("dip_war_description"),touch:["hold",500],placement:n.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,m.jsxs)("button",{type:"button",className:u,onClick:this.handleWar1,children:[(0,m.jsx)(p(),{path:d.mSZ,className:"icon mr-1 mt-[1px]"}),(0,a.v)("dip_war")]})}):(0,m.jsx)(o.l,{content:(0,a.v)("dip_insult_description"),touch:["hold",500],placement:n.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:(0,m.jsxs)("button",{type:"button",className:x,onClick:this.handleInsult,children:[(0,m.jsx)(p(),{path:d.Dh9,className:"icon mr-1 mt-[1px]"}),(0,a.v)("dip_insult")]})})]})})]})}}const N=(0,r.WQ)("MainStore")((0,r.PA)(y));class _ extends i.Component{constructor(){super(...arguments),this.handleToggleTrade=()=>{this.props.MainStore.DiplomacyStore.toggleTrade(this.props.id)}}render(){return(0,m.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-mydark-400 border border-gray-300 dark:border-mydark-200 rounded-lg shadow flex flex-col "+(1===this.props.trade?" border-green-500 dark:border-green-700":""),children:[(0,m.jsxs)("div",{className:"flex-1 text-center px-12 3xl:px-0",children:[(0,m.jsx)("h5",{className:"font-bold whitespace-nowrap inline "+(1===this.props.trade?" !text-green-600 dark:!text-green-500":""),children:(0,a.v)("dip_trade_agreements")}),(0,m.jsx)("div",{className:"my-4",children:(0,m.jsx)("div",{className:"rounded border border-gray-300 dark:border-gray-700 overflow-hidden",children:this.props.resources.map(((e,s)=>{const t=s%2===0;return(0,m.jsxs)("div",{className:(0,u.xW)("flex items-center justify-between px-2 py-1 text-sm",t?"bg-gray-200 dark:bg-mydark-300/5":"bg-gray-200/5 dark:bg-mydark-300",""),children:[(0,m.jsx)("span",{className:"whitespace-nowrap",children:(0,a.v)("res_"+e.id)}),(0,m.jsxs)("span",{className:(0,u.xW)("font-medium ml-2",e.value<0?"text-red-500":""),children:[e.value>0?"+":"",e.value.toLocaleString(),"/s"]})]},this.props.id+"_trade_"+s)}))})})]}),(0,m.jsx)("div",{className:"text-center px-4 lg:px-12 xl:px-8 2xl:px-12 3xl:px-0",children:1===this.props.trade?(0,m.jsxs)("button",{type:"button",className:"btn btn-dark w-full",onClick:this.handleToggleTrade,children:[(0,m.jsx)(p(),{path:d.dwL,className:"icon mr-1 mt-[1px]"}),(0,m.jsx)("span",{className:"3xl:hidden 4xl:inline",children:(0,a.v)("dip_trade_cancel")}),(0,m.jsx)("span",{className:"hidden 3xl:inline 4xl:hidden",children:(0,a.v)("dip_trade_cancel_abbr")})]}):(0,m.jsxs)("button",{type:"button",className:"btn btn-green w-full",onClick:this.handleToggleTrade,children:[(0,m.jsx)(p(),{path:d._AM,className:"icon mr-1 mt-[1px]"}),(0,m.jsx)("span",{className:"3xl:hidden 4xl:inline",children:(0,a.v)("dip_trade_accept")}),(0,m.jsx)("span",{className:"hidden 3xl:inline 4xl:hidden",children:(0,a.v)("dip_trade_accept_abbr")})]})})]})}}const w=(0,r.WQ)("MainStore")((0,r.PA)(_));class S extends i.Component{render(){const{negativeRelationship:e}=this.props.MainStore.DiplomacyStore;return(0,m.jsx)(m.Fragment,{children:1===this.props.runDiplomacy.alliance?(0,m.jsx)(f,{id:this.props.diplomacy.id,gen:this.props.diplomacy.alliance}):1===this.props.runDiplomacy.owned?(0,m.jsx)(j,{id:this.props.diplomacy.id,gen:this.props.diplomacy.gen}):1===this.props.runDiplomacy.war?(0,m.jsx)("div",{className:"flex justify-center text-sm mt-3",children:(0,m.jsx)("div",{className:"min-w-[40%] w-auto",children:(0,m.jsx)(c.A,{text:(0,a.v)("dip_war_declaration"),type:"war",small:!0})})}):0===this.props.runDiplomacy.relationship?(0,m.jsx)(g,{id:this.props.diplomacy.id,req:this.props.diplomacy.reqDelegation}):(0,m.jsxs)("div",{className:"grid gap-3 3xl:grid-cols-2 min-w-full mt-3",children:[(0,m.jsx)(N,{id:this.props.diplomacy.id,req:this.props.diplomacy.reqImproveRelationship,gen:this.props.diplomacy.alliance,relationship:this.props.runDiplomacy.relationship}),this.props.runDiplomacy.relationship>=e?(0,m.jsx)(w,{id:this.props.diplomacy.id,resources:this.props.diplomacy.commercial,trade:this.props.runDiplomacy.trade}):null]})})}}const k=(0,r.WQ)("MainStore")((0,r.PA)(S));class M extends i.Component{handleKingdomNotification(e,s){const t=1===s.war&&1!==s.owned&&1!==s.alliance?"war":"green";this.props.MainStore.toggleImageNotification("img_"+e,"img_"+e+"_description",t)}render(){const{diplomacy:e}=this.props.MainStore.run,{visibleDiplomacy:s,negativeRelationship:t,positiveRelationship:i}=this.props.MainStore.DiplomacyStore;return(0,m.jsx)("div",{className:"tab-container",children:(0,m.jsx)("div",{className:"flex flex-wrap min-w-full mt-3",children:(0,m.jsx)("div",{className:"grid gap-3 xl:gap-5 xl:grid-cols-2 min-w-full",children:s.length>0?s.map((s=>{const r=e.find((e=>e.id===s.id));return(0,m.jsxs)("div",{className:"flex flex-wrap min-w-full overflow-hidden p-3 shadow rounded-lg ring-1 ring-gray-300 dark:ring-mydark-200 bg-gray-100 dark:bg-mydark-600",children:[(0,m.jsxs)("div",{className:"w-full font-bold h-min",children:[(0,m.jsx)(o.l,{content:(0,m.jsx)(m.Fragment,{children:0===r.relationship?(0,a.v)("dip_relationship_unknown"):r.relationship<t?(0,a.v)("dip_relationship_negative"):r.relationship>i?(0,a.v)("dip_relationship_positive"):(0,a.v)("dip_relationship_neutral")}),touch:["hold",500],placement:n.Fr?"top":"bottom",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right","left"]}}]},children:0===r.relationship?(0,m.jsx)(p(),{path:d.ORM,className:"icon inline -mt-1 mr-2 text-gray-500"}):r.relationship<t?(0,m.jsx)(p(),{path:d.MEE,className:"icon inline -mt-1 mr-2 text-red-600"}):r.relationship>i?(0,m.jsx)(p(),{path:d.FpE,className:"icon inline -mt-1 mr-2 text-green-600"}):(0,m.jsx)(p(),{path:d.o$Y,className:"icon inline -mt-1 mr-2 text-gray-500"})}),(0,m.jsxs)("button",{type:"button",className:"inline-flex items-center font-bold",onClick:()=>this.handleKingdomNotification(s.id,r),children:[(0,a.v)("dip_"+s.id)," ",(0,m.jsx)(p(),{path:d.gs2,className:"icon inline !w-4 ml-1"})]})]}),(0,m.jsx)(k,{runDiplomacy:r,diplomacy:s})]},"dip_card_"+s.id)})):null})})})}}const q=(0,r.WQ)("MainStore")((0,r.PA)(M))}}]);